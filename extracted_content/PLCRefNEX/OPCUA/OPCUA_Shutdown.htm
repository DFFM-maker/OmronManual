
<!doctype HTML public "-//W3C//DTD HTML 4.0 Frameset//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
 <meta name="generator" content="Adobe RoboHelp 11">
<title>OPCUA_Shutdown</title>
<link rel="StyleSheet" href="App.css" type="text/css">
<style title="hcp" type="text/css">
<!--
table.hcp1 { padding-left:4.00pt;
padding-top:3.00pt;
padding-right:4.00pt;
padding-bottom:1.00pt;
margin-left:42.52pt; }
th.hcp2 { border-top:solid 1px #000000;
border-right:solid 1px #000000;
border-bottom:solid 1px #000000;
vertical-align:top;
padding-left:6.00pt;
padding-top:3.00pt;
padding-right:6.00pt;
padding-bottom:3.00pt; }
th.hcp3 { border-top:solid 1px #000000;
border-bottom:solid 1px #000000;
vertical-align:top;
padding-left:6.00pt;
padding-top:3.00pt;
padding-right:6.00pt;
padding-bottom:3.00pt; }
td.hcp4 { border-right:solid 1px #000000;
border-bottom:solid 1px #000000;
vertical-align:top;
padding-left:6.00pt;
padding-top:3.00pt;
padding-right:6.00pt;
padding-bottom:3.00pt; }
td.hcp5 { border-bottom:solid 1px #000000;
vertical-align:top;
padding-left:6.00pt;
padding-top:3.00pt;
padding-right:6.00pt;
padding-bottom:3.00pt; }
table.hcp6 { padding-top:3.00pt;
padding-right:4.00pt;
padding-bottom:1.00pt; }
td.hcp7 { vertical-align:top;
padding-left:6.00pt;
padding-top:3.00pt;
padding-right:6.00pt;
padding-bottom:3.00pt; }
table.hcp8 { padding-top:6.00pt;
padding-right:4.00pt;
padding-bottom:1.00pt;
margin-left:31.18pt; }
td.hcp9 { border-left:solid 7px #000000;
border-bottom:solid 1px #000000;
vertical-align:top;
padding-left:6.00pt;
padding-top:3.00pt;
padding-right:6.00pt;
padding-bottom:3.00pt; }
table.hcp10 { padding-left:4.00pt;
padding-top:3.00pt;
padding-right:4.00pt;
padding-bottom:1.00pt;
margin-left:28.35pt; }
span.hcp11 { word-spacing:normal;
font:6.0pt 'Times New Roman'; }
div.hcp12 { text-align:right; }
p.hcp13 { text-align:left; }
span.hcp14 { font-family:Times New Roman;
font-size:7.0pt; }
-->
</style>
</head>
<body>
<script type="text/javascript" src="../../ehlpdhtm.js" language="JavaScript1.2"></script>

<p class="Title">OPCUA_Shutdown</p>
<p class="FM_body1">The OPCUA_Shutdown (Shutdown OPC UA Function) instruction requests the termination of the OPC UA functions so that the controller power supply can be safely turned OFF.</p>
<p class="FM_tablespec">&#160;</p>

<table cellspacing="0" width="661" class="hcp1">
<tr style="height: 25.00pt;" bgcolor="#B3B3B3">
<th width="94" bgcolor="#B3B3B3" class="hcp2">
<p class="FM_tabletitlec9pt">Instruction</p>
</th>
<th width="94" bgcolor="#B3B3B3" class="hcp2">
<p class="FM_tabletitlec9pt">Name</p>
</th>
<th width="43" bgcolor="#B3B3B3" class="hcp2">
<p class="FM_tabletitlec9pt">FB/FUN</p>
</th>
<th width="236" bgcolor="#B3B3B3" class="hcp2">
<p class="FM_tabletitlec9pt">Graphic expression</p>
</th>
<th width="194" bgcolor="#B3B3B3" class="hcp3">
<p class="FM_tabletitlec9pt">ST expression</p>
</th>
</tr>
<tr style="height: 113.37pt;">
<td width="94" class="hcp4">
<p class="FM_tablebody19pt">OPCUA_Shut­down</p>
</td>
<td width="94" class="hcp4">
<p class="FM_tablebody19pt">Shutdown OPC UA Server</p>
</td>
<td width="43" class="hcp4">
<p class="FM_tablebody19pt">FB</p>
</td>
<td style="border-right: solid 1px #000000; border-bottom: solid 1px #000000;" width="236">
<div style="text-align: center;"><img alt="02-01_010.jpg" id="image3" src="02-01_010.jpg" width="221" height="143" border="0" name="image3"></div>
<p class="FM_fig">&#160;</p>
</td>
<td width="194" class="hcp5">
<p class="FM_tablebody19pt">OPCUA_Shutdown_instance (Execute, Done, Busy, Error, ErrorID);</p>
</td>
</tr>
</table>

<p class="FM_body1"><span class="FM_Arial">Note</span> <span class="FM_italic">The OPCUA_Shutdown_instance</span>&#160;is an instance of OPCUA_Shutdown (Shutdown OPC UA Function) instruction, which is declared as a variable.</p>

<table cellspacing="0" width="100%" class="hcp6">
<col style="width: 100%;">
<tr style="height: 17.99pt;" bgcolor="#B3B3B3">
<td bgcolor="#B3B3B3" class="hcp7">
<p class="FM_CRhead3">Variables</p>
</td>
</tr>
</table>

<p class="FM_body1">&#160;</p>

<table cellspacing="0" width="620" class="hcp8">
<tr style="height: 21.00pt;">
<td width="620" class="hcp9">
<p class="FM_head4">Input Variables</p>
</td>
</tr>
</table>

<p class="FM_tablespec">&#160;</p>

<table cellspacing="0" width="624" class="hcp10">
<tr style="height: 13.00pt;" bgcolor="#B3B3B3">
<th width="95" bgcolor="#B3B3B3" class="hcp2">
<p class="FM_tabletitlec9pt">Input variable</p>
</th>
<th width="89" bgcolor="#B3B3B3" class="hcp2">
<p class="FM_tabletitlec9pt">Meaning</p>
</th>
<th width="79" bgcolor="#B3B3B3" class="hcp2">
<p class="FM_tabletitlec9pt">Data type</p>
</th>
<th width="115" bgcolor="#B3B3B3" class="hcp2">
<p class="FM_tabletitlec9pt">Valid range</p>
</th>
<th width="50" bgcolor="#B3B3B3" class="hcp2">
<p class="FM_tabletitlec9pt">Unit</p>
</th>
<th width="57" bgcolor="#B3B3B3" class="hcp2">
<p class="FM_tabletitlec9pt">Default</p>
</th>
<th width="139" bgcolor="#B3B3B3" class="hcp3">
<p class="FM_tabletitlec9pt">Description</p>
</th>
</tr>
<tr style="height: 25.00pt;">
<td width="95" class="hcp4">
<p class="FM_tablebody19pt">Execute</p>
</td>
<td width="89" class="hcp4">
<p class="FM_tablebody19pt">Execute</p>
</td>
<td width="79" class="hcp4">
<p class="FM_tablebody19pt">BOOL</p>
</td>
<td width="115" class="hcp4">
<p class="FM_tablebody19pt">TRUE or FALSE</p>
</td>
<td width="50" class="hcp4">
<p class="FM_tablebody19pt">---</p>
</td>
<td width="57" class="hcp4">
<p class="FM_tablebody19pt">FALSE</p>
</td>
<td width="139" class="hcp5">
<p class="FM_tablebody19pt">Specify the execution condition.</p>
</td>
</tr>
</table>

<table cellspacing="0" width="620" class="hcp8">
<tr style="height: 21.00pt;">
<td width="620" class="hcp9">
<p class="FM_head4">Output Variables</p>
</td>
</tr>
</table>

<p class="FM_tablespec">&#160;</p>

<table cellspacing="0" width="624" class="hcp10">
<tr style="height: 25.00pt;" bgcolor="#B3B3B3">
<th width="94" bgcolor="#B3B3B3" class="hcp2">
<p class="FM_tabletitlec9pt">Output vari­able</p>
</th>
<th width="88" bgcolor="#B3B3B3" class="hcp2">
<p class="FM_tabletitlec9pt">Meaning</p>
</th>
<th width="79" bgcolor="#B3B3B3" class="hcp2">
<p class="FM_tabletitlec9pt">Data type</p>
</th>
<th width="88" bgcolor="#B3B3B3" class="hcp2">
<p class="FM_tabletitlec9pt">Valid range</p>
</th>
<th width="50" bgcolor="#B3B3B3" class="hcp2">
<p class="FM_tabletitlec9pt">Unit</p>
</th>
<th width="225" bgcolor="#B3B3B3" class="hcp3">
<p class="FM_tabletitlec9pt">Description</p>
</th>
</tr>
<tr style="height: 25.00pt;">
<td width="94" class="hcp4">
<p class="FM_tablebody19pt">Done</p>
</td>
<td width="88" class="hcp4">
<p class="FM_tablebody19pt">Done</p>
</td>
<td width="79" class="hcp4">
<p class="FM_tablebody19pt">BOOL</p>
</td>
<td width="88" class="hcp4">
<p class="FM_tablebody19pt">TRUE or FALSE</p>
</td>
<td width="50" class="hcp4">
<p class="FM_tablebody19pt">---</p>
</td>
<td width="225" class="hcp5">
<p class="FM_tablebody19pt">TRUE when the instruction is normally completed.</p>
</td>
</tr>
<tr style="height: 25.00pt;">
<td width="94" class="hcp4">
<p class="FM_tablebody19pt">Busy</p>
</td>
<td width="88" class="hcp4">
<p class="FM_tablebody19pt">Executing</p>
</td>
<td width="79" class="hcp4">
<p class="FM_tablebody19pt">BOOL</p>
</td>
<td width="88" class="hcp4">
<p class="FM_tablebody19pt">TRUE or FALSE</p>
</td>
<td width="50" class="hcp4">
<p class="FM_tablebody19pt">---</p>
</td>
<td width="225" class="hcp5">
<p class="FM_tablebody19pt">TRUE when the instruction is being exe­cuted.</p>
</td>
</tr>
<tr style="height: 25.00pt;">
<td width="94" class="hcp4">
<p class="FM_tablebody19pt">Error</p>
</td>
<td width="88" class="hcp4">
<p class="FM_tablebody19pt">Error</p>
</td>
<td width="79" class="hcp4">
<p class="FM_tablebody19pt">BOOL</p>
</td>
<td width="88" class="hcp4">
<p class="FM_tablebody19pt">TRUE or FALSE</p>
</td>
<td width="50" class="hcp4">
<p class="FM_tablebody19pt">---</p>
</td>
<td width="225" class="hcp5">
<p class="FM_tablebody19pt">TRUE when the instruction is terminated due to an error.</p>
</td>
</tr>
<tr style="height: 25.00pt;">
<td width="94" class="hcp4">
<p class="FM_tablebody19pt">ErrorID</p>
</td>
<td width="88" class="hcp4">
<p class="FM_tablebody19pt">Error Code</p>
</td>
<td width="79" class="hcp4">
<p class="FM_tablebody19pt">WORD</p>
</td>
<td width="88" class="hcp4">
<p class="FM_tablebody19pt">16#0000 to 16#FFFF</p>
</td>
<td width="50" class="hcp4">
<p class="FM_tablebody19pt">---</p>
</td>
<td width="225" class="hcp5">
<p class="FM_tablebody19pt">Contains the error code when an error occurs.</p>
</td>
</tr>
</table>

<p class="FM_body1">&#160;</p>

<table cellspacing="0" width="100%" class="hcp6">
<col style="width: 100%;">
<tr style="height: 17.99pt;" bgcolor="#B3B3B3">
<td bgcolor="#B3B3B3" class="hcp7">
<p class="FM_CRhead3">Related System-defined Variables</p>
</td>
</tr>
</table>

<p class="FM_body1">None</p>
<p class="FM_body1">&#160;</p>

<table cellspacing="0" width="100%" class="hcp6">
<col style="width: 100%;">
<tr style="height: 17.99pt;" bgcolor="#B3B3B3">
<td bgcolor="#B3B3B3" class="hcp7">
<p class="FM_CRhead3">Related Error Codes</p>
</td>
</tr>
</table>

<p class="FM_tablespec">&#160;</p>

<table cellspacing="0" width="661" class="hcp1">
<tr style="height: 13.00pt;" bgcolor="#B3B3B3">
<th width="93" bgcolor="#B3B3B3" class="hcp2">
<p class="FM_tabletitlec9pt">Error code</p>
</th>
<th width="238" bgcolor="#B3B3B3" class="hcp2">
<p class="FM_tabletitlec9pt">Error name</p>
</th>
<th width="331" bgcolor="#B3B3B3" class="hcp3">
<p class="FM_tabletitlec9pt">Description</p>
</th>
</tr>
<tr style="height: 25.00pt;">
<td width="93" class="hcp4">
<p class="FM_tablebody19pt">16# 041D</p>
</td>
<td width="238" class="hcp4">
<p class="FM_tablebody19pt">Too Many Instructions Executed at the Same Time</p>
</td>
<td width="331" class="hcp5">
<p class="FM_tablebody19pt">More than 32 OPC UA instructions were executed at the same time.</p>
</td>
</tr>
<tr style="height: 37.00pt;">
<td width="93" class="hcp4">
<p class="FM_tablebody19pt">16# 5000</p>
</td>
<td width="238" class="hcp4">
<p class="FM_tablebody19pt">OPC UA Server Shutdown or Shutting Down</p>
</td>
<td width="331" class="hcp5">
<p class="FM_tablebody19pt">The instruction was executed after the OPC UA Server was shut down or while the OPC UA Server was being shut down.</p>
</td>
</tr>
<tr style="height: 25.00pt;">
<td width="93" class="hcp4">
<p class="FM_tablebody19pt">16# 5001</p>
</td>
<td width="238" class="hcp4">
<p class="FM_tablebody19pt">OPC UA Server Initializing</p>
</td>
<td width="331" class="hcp5">
<p class="FM_tablebody19pt">The instruction cannot be executed because the OPC UA Server is being initialized.</p>
</td>
</tr>
<tr style="height: 37.00pt;">
<td width="93" class="hcp4">
<p class="FM_tablebody19pt">16# 5002</p>
</td>
<td width="238" class="hcp4">
<p class="FM_tablebody19pt">OPC UA Server Not Started</p>
</td>
<td width="331" class="hcp5">
<p class="FM_tablebody19pt">While the <span class="FM_italic">Do not use</span>&#160;Option was selected for the OPC UA Server, the instruction was executed after a power-on or reset of the controller.</p>
</td>
</tr>
</table>

<p class="FM_body1">For details on errors, refer to Errors Related to the OPC UA Server&#160;in&#160;OPC UA Server Error Description.</p>
<p class="FM_body1">&#160;</p>

<table cellspacing="0" width="100%" class="hcp6">
<col style="width: 100%;">
<tr style="height: 17.99pt;" bgcolor="#B3B3B3">
<td bgcolor="#B3B3B3" class="hcp7">
<p class="FM_CRhead3">Function</p>
</td>
</tr>
</table>

<p class="FM_body1">The OPCUA_Shutdown (Shutdown OPC UA Function) instruction requests the shutdown of the OPC UA Server so that the controller power supply can be safely turned OFF.</p>
<p class="FM_body1">At this time, in order to set the OPC UA Server to the shutdown state, record <span class="FM_italic">OPC UA server shutdown completed</span> in the Execution Log, and stop access to the SD memory card.</p>
<p class="FM_body1">Before turning OFF the power supply to the controller, make sure this instruction has terminated nor­mally (the value of <span class="FM_italic">Done</span> has changed to TRUE).</p>
<p class="FM_body1">This instruction operates separately from the function of accessing the SD Memory Card for other instructions. If other than the OPC UA Server accesses the SD memory card during the execution of this instruction, this instruction will be executed asynchronously with respect to the SD memory card access, and therefore, the processing order will be optional.</p>
<p class="FM_body1">&#160;</p>

<table cellspacing="0" width="100%" class="hcp6">
<col style="width: 100%;">
<tr style="height: 17.99pt;" bgcolor="#B3B3B3">
<td bgcolor="#B3B3B3" class="hcp7">
<p class="FM_CRhead3">Precautions for Correct Use</p>
</td>
</tr>
</table>

<p class="FM_bul1">•<span class="hcp11">&#160;&#160;&#160;&#160;</span>Execution of this instruction is continued until processing is completed even if the value of <span class="FM_italic">Execute</span>&#160;changes to FALSE or the execution time exceeds the task period. You can confirm that the process­ing normally ends by checking that the value of <span class="FM_italic">Done</span> has changed to TRUE.</p>
<p class="FM_bul1">•<span class="hcp11">&#160;&#160;&#160;&#160;</span>Refer to <span class="FM_italic">Using this Section</span> of the <span class="FM_italic">NJ/NX-series Instructions Reference Manual</span>&#160;(Cat. No. W502) for a timing chart for <span class="FM_italic">Execute</span>, <span class="FM_italic">Done</span>, <span class="FM_italic">Busy</span>, and <span class="FM_italic">Error</span>.</p>
<p class="FM_bul1">•<span class="hcp11">&#160;&#160;&#160;&#160;</span>This instruction cannot be used on an event task. A compiling error will occur.</p>
<p class="FM_bul1">•<span class="hcp11">&#160;&#160;&#160;&#160;</span>OPC UA instructions cannot be executed during and after execution of this instruction. The execution of an OPC UA instruction will result in an error.</p>
<p class="FM_bul1">•<span class="hcp11">&#160;&#160;&#160;&#160;</span>Before turning OFF the power supply to the system, make sure this instruction has terminated nor­mally by confirming that the value of <span class="FM_italic">Done</span> has changed to TRUE.</p>
<p class="FM_bul1">•<span class="hcp11">&#160;&#160;&#160;&#160;</span>If the power supply is turned OFF without executing this instruction, the Execution Log will not be saved correctly.</p>
<p class="FM_body1">&#160;</p>

<table cellspacing="0" width="100%" class="hcp6">
<col style="width: 100%;">
<tr style="height: 17.99pt;" bgcolor="#B3B3B3">
<td bgcolor="#B3B3B3" class="hcp7">
<p class="FM_CRhead3">Additional Information</p>
</td>
</tr>
</table>

<p class="FM_body1">If this instruction is executed on the simulator, no processing is performed, and the output variables are as shown below.</p>
<p class="FM_tablespec">&#160;</p>

<table cellspacing="0" width="406" class="hcp1">
<tr style="height: 25.00pt;" bgcolor="#B3B3B3">
<th width="76" bgcolor="#B3B3B3" class="hcp2">
<p class="FM_tabletitlec9pt">Output variable</p>
</th>
<th width="94" bgcolor="#B3B3B3" class="hcp2">
<p class="FM_tabletitlec9pt">Meaning</p>
</th>
<th width="94" bgcolor="#B3B3B3" class="hcp2">
<p class="FM_tabletitlec9pt">Data type</p>
</th>
<th width="142" bgcolor="#B3B3B3" class="hcp3">
<p class="FM_tabletitlec9pt">Execution results</p>
</th>
</tr>
<tr style="height: 13.00pt;">
<td width="76" class="hcp4">
<p class="FM_tablebody19pt">Done</p>
</td>
<td width="94" class="hcp4">
<p class="FM_tablebody19pt">Done</p>
</td>
<td width="94" class="hcp4">
<p class="FM_tablebody19pt">BOOL</p>
</td>
<td width="142" class="hcp5">
<p class="FM_tablebody19pt">TRUE</p>
</td>
</tr>
<tr style="height: 13.00pt;">
<td width="76" class="hcp4">
<p class="FM_tablebody19pt">Busy</p>
</td>
<td width="94" class="hcp4">
<p class="FM_tablebody19pt">Executing</p>
</td>
<td width="94" class="hcp4">
<p class="FM_tablebody19pt">BOOL</p>
</td>
<td width="142" class="hcp5">
<p class="FM_tablebody19pt">FALSE</p>
</td>
</tr>
<tr style="height: 13.00pt;">
<td width="76" class="hcp4">
<p class="FM_tablebody19pt">Error</p>
</td>
<td width="94" class="hcp4">
<p class="FM_tablebody19pt">Error</p>
</td>
<td width="94" class="hcp4">
<p class="FM_tablebody19pt">BOOL</p>
</td>
<td width="142" class="hcp5">
<p class="FM_tablebody19pt">FALSE</p>
</td>
</tr>
<tr style="height: 13.00pt;">
<td width="76" class="hcp4">
<p class="FM_tablebody19pt">ErrorID</p>
</td>
<td width="94" class="hcp4">
<p class="FM_tablebody19pt">Error Code</p>
</td>
<td width="94" class="hcp4">
<p class="FM_tablebody19pt">WORD</p>
</td>
<td width="142" class="hcp5">
<p class="FM_tablebody19pt">16#0000</p>
</td>
</tr>
</table>

<p class="FM_body1">&#160;</p>

<table cellspacing="0" width="100%" class="hcp6">
<col style="width: 100%;">
<tr style="height: 17.99pt;" bgcolor="#B3B3B3">
<td bgcolor="#B3B3B3" class="hcp7">
<p class="FM_CRhead3">Sample Programming</p>
</td>
</tr>
</table>

<p class="FM_body1">This section gives sample programming for shutting down the OPC UA Server when the trigger variable changes to TRUE.</p>

<table cellspacing="0" width="620" class="hcp8">
<tr style="height: 21.00pt;">
<td width="620" class="hcp9">
<p class="FM_head4">Ladder Diagram</p>
</td>
</tr>
</table>

<p class="FM_head5"><span class="FM_Wingdings">l<span class="hcp11">&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span></span>Main Variables</p>
<p class="FM_tablespec">&#160;</p>

<table cellspacing="0" width="624" class="hcp10">
<tr style="height: 13.00pt;" bgcolor="#B3B3B3">
<th width="187" bgcolor="#B3B3B3" class="hcp2">
<p class="FM_tabletitlec9pt">Name</p>
</th>
<th width="148" bgcolor="#B3B3B3" class="hcp2">
<p class="FM_tabletitlec9pt">Data type</p>
</th>
<th width="96" bgcolor="#B3B3B3" class="hcp2">
<p class="FM_tabletitlec9pt">Initial value</p>
</th>
<th width="192" bgcolor="#B3B3B3" class="hcp3">
<p class="FM_tabletitlec9pt">Comment</p>
</th>
</tr>
<tr style="height: 37.00pt;">
<td width="187" class="hcp4">
<p class="FM_tablebody19pt">OPCUA_Shutdown_instance</p>
</td>
<td width="148" class="hcp4">
<p class="FM_tablebody19pt">OPCUA_Shutdown</p>
</td>
<td width="96" class="hcp4">
<p class="FM_tablebody19pt">---</p>
</td>
<td width="192" class="hcp5">
<p class="FM_tablebody19pt">Instance of OPCUA_Shutdown (Shutdown OPC UA Function) instruction.</p>
</td>
</tr>
<tr style="height: 25.00pt;">
<td width="187" class="hcp4">
<p class="FM_tablebody19pt">Trigger</p>
</td>
<td width="148" class="hcp4">
<p class="FM_tablebody19pt">BOOL</p>
</td>
<td width="96" class="hcp4">
<p class="FM_tablebody19pt">FALSE</p>
</td>
<td width="192" class="hcp5">
<p class="FM_tablebody19pt">Variable used as a trigger for shut­ting down the OPC UA Server.</p>
</td>
</tr>
<tr style="height: 49.00pt;">
<td width="187" class="hcp4">
<p class="FM_tablebody19pt">Shutdown_OK</p>
</td>
<td width="148" class="hcp4">
<p class="FM_tablebody19pt">BOOL</p>
</td>
<td width="96" class="hcp4">
<p class="FM_tablebody19pt">FALSE</p>
</td>
<td width="192" class="hcp5">
<p class="FM_tablebody19pt">This variable changes to TRUE when the OPCUA_Shutdown (Shutdown OPC UA Function) instruction terminates normally.</p>
</td>
</tr>
</table>

<p class="FM_head5"><span class="FM_Wingdings">l<span class="hcp11">&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span></span>Sample Programming</p>
<p class="FM_bul2">•<span class="hcp11">&#160;&#160;&#160;&#160;</span>Shutdown the OPC UA Server.</p>
<p class="FM_body1">Shutdown the OPC UA server by setting Trigger to TRUE.</p>
<div class="hcp12">
<p class="hcp13"><img alt="02-08_010.jpg" id="image4" src="02-08_010.jpg" width="661" height="121" border="0" name="image4"></p>
</div>
<p class="FM_fig">&#160;</p>
<p class="FM_body1">When the instruction is normally completed, the Shutdown_OK variable is changed to TRUE.</p>
<div class="hcp12">
<p class="hcp13"><img alt="02-08_020.jpg" id="image5" src="02-08_020.jpg" width="661" height="68" border="0" name="image5"></p>
</div>
<p class="FM_fig">&#160;</p>

<table cellspacing="0" width="620" class="hcp8">
<tr style="height: 21.00pt;">
<td width="620" class="hcp9">
<p class="FM_head4">Structured Text (ST)</p>
</td>
</tr>
</table>

<p class="FM_head5"><span class="FM_Wingdings">l<span class="hcp11">&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span></span>Main Variables</p>
<p class="FM_tablespec">&#160;</p>

<table cellspacing="0" width="624" class="hcp10">
<tr style="height: 13.00pt;" bgcolor="#B3B3B3">
<th width="187" bgcolor="#B3B3B3" class="hcp2">
<p class="FM_tabletitlec9pt">Name</p>
</th>
<th width="148" bgcolor="#B3B3B3" class="hcp2">
<p class="FM_tabletitlec9pt">Data type</p>
</th>
<th width="96" bgcolor="#B3B3B3" class="hcp2">
<p class="FM_tabletitlec9pt">Initial value</p>
</th>
<th width="192" bgcolor="#B3B3B3" class="hcp3">
<p class="FM_tabletitlec9pt">Comment</p>
</th>
</tr>
<tr style="height: 37.00pt;">
<td width="187" class="hcp4">
<p class="FM_tablebody19pt">OPCUA_Shutdown_instance</p>
</td>
<td width="148" class="hcp4">
<p class="FM_tablebody19pt">OPCUA_Shutdown</p>
</td>
<td width="96" class="hcp4">
<p class="FM_tablebody19pt">---</p>
</td>
<td width="192" class="hcp5">
<p class="FM_tablebody19pt">Instance of OPCUA_Shutdown (Shutdown OPC UA Function) instruction.</p>
</td>
</tr>
<tr style="height: 25.00pt;">
<td width="187" class="hcp4">
<p class="FM_tablebody19pt">Trigger</p>
</td>
<td width="148" class="hcp4">
<p class="FM_tablebody19pt">BOOL</p>
</td>
<td width="96" class="hcp4">
<p class="FM_tablebody19pt">FALSE</p>
</td>
<td width="192" class="hcp5">
<p class="FM_tablebody19pt">Variable used as a trigger for shut­ting down the OPC UA Server.</p>
</td>
</tr>
<tr style="height: 25.00pt;">
<td width="187" class="hcp4">
<p class="FM_tablebody19pt">LastTrigger</p>
</td>
<td width="148" class="hcp4">
<p class="FM_tablebody19pt">BOOL</p>
</td>
<td width="96" class="hcp4">
<p class="FM_tablebody19pt">FALSE</p>
</td>
<td width="192" class="hcp5">
<p class="FM_tablebody19pt">Variable to retain the trigger status of the previous execution.</p>
</td>
</tr>
<tr style="height: 25.00pt;">
<td width="187" class="hcp4">
<p class="FM_tablebody19pt">Operating</p>
</td>
<td width="148" class="hcp4">
<p class="FM_tablebody19pt">BOOL</p>
</td>
<td width="96" class="hcp4">
<p class="FM_tablebody19pt">FALSE</p>
</td>
<td width="192" class="hcp5">
<p class="FM_tablebody19pt">The OPC UA Server is shutdown when this variable is TRUE.</p>
</td>
</tr>
<tr style="height: 37.00pt;">
<td width="187" class="hcp4">
<p class="FM_tablebody19pt">OperatingStart</p>
</td>
<td width="148" class="hcp4">
<p class="FM_tablebody19pt">BOOL</p>
</td>
<td width="96" class="hcp4">
<p class="FM_tablebody19pt">FALSE</p>
</td>
<td width="192" class="hcp5">
<p class="FM_tablebody19pt">The initialization processing is executed when this variable is TRUE.</p>
</td>
</tr>
<tr style="height: 49.00pt;">
<td width="187" class="hcp4">
<p class="FM_tablebody19pt">ShutdownOK</p>
</td>
<td width="148" class="hcp4">
<p class="FM_tablebody19pt">BOOL</p>
</td>
<td width="96" class="hcp4">
<p class="FM_tablebody19pt">FALSE</p>
</td>
<td width="192" class="hcp5">
<p class="FM_tablebody19pt">This variable changes to TRUE when the OPCUA_Shutdown (Shutdown OPC UA Function) instruction terminates normally.</p>
</td>
</tr>
</table>

<p class="FM_head5"><span class="FM_Wingdings">l<span class="hcp11">&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span></span>Sample Programming</p>
<div class="FM_body1l">(*----------------------------------------------------------------------------------</div>
<div class="FM_body1l">&#160;&#160;&#160;<span style="font-family: Wingdings; color: #000000;">u</span>Shutdown the OPC UA Server. ----------------------------------------------------------------------------------*)</div>
<div class="FM_body1l">&#160;</div>
<div class="FM_body1l">// Start the sequence when the variable Trigger changes to TRUE.</div>
<div class="FM_body1l">IF ( (Trigger=TRUE) AND (LastTrigger=FALSE) ) THEN</div>
<div class="FM_body1l">&#160;&#160;&#160;OperatingStart := TRUE;</div>
<div class="FM_body1l">&#160;&#160;&#160;Operating := TRUE;</div>
<div class="FM_body1l">END_IF;</div>
<div class="FM_body1l">LastTrigger := Trigger;</div>
<div class="FM_body1l">&#160;</div>
<div class="FM_body1l">// Sequence start processing</div>
<div class="FM_body1l">IF (OperatingStart=TRUE) THEN</div>
<div class="FM_body1l">&#160;&#160;&#160;// Initialize the instruction instance.</div>
<div class="FM_body1l">&#160;&#160;&#160;OPCUA_Shutdown_instance( Execute:=FALSE );</div>
<div class="FM_body1l">&#160;</div>
<div class="FM_body1l">&#160;&#160;&#160;OperatingStart := FALSE;</div>
<div class="FM_body1l">END_IF;</div>
<div class="FM_body1l">&#160;</div>
<div class="FM_body1l">IF (Operating=TRUE) THEN</div>
<div class="FM_body1l">&#160;&#160;&#160;// Shutdown OPC UA Server</div>
<div class="FM_body1l">&#160;&#160;&#160;OPCUA_Shutdown_instance( Execute:=TRUE );</div>
<div class="FM_body1l">&#160;</div>
<div class="FM_body1l">IF (OPCUA_Shutdown_instance.Done=TRUE) THEN</div>
<div class="FM_body1l"><span class="hcp14">&#160;&#160;&#160;</span><span class="hcp14">&#160;&#160;&#160;</span>&#160;&#160;&#160;&#160;// Normal end processing</div>
<div class="FM_body1l"><span class="hcp14">&#160;&#160;&#160;</span><span class="hcp14">&#160;&#160;&#160;</span>&#160;&#160;&#160;&#160;ShutdownOK := TRUE;</div>
<div class="FM_body1l"><span class="hcp14">&#160;&#160;&#160;</span><span class="hcp14">&#160;&#160;&#160;</span><span class="hcp14">&#160;&#160;&#160;</span>&#160;&#160;&#160;&#160;Operating := FALSE;</div>
<div class="FM_body1l"><span class="hcp14">&#160;&#160;&#160;</span>&#160;&#160;END_IF;</div>
<div class="FM_body1l"><span class="hcp14">&#160;&#160;&#160;</span>&#160;&#160;IF (OPCUA_Shutdown_instance.Error=TRUE) THEN</div>
<div class="FM_body1l"><span class="hcp14">&#160;&#160;&#160;</span><span class="hcp14">&#160;&#160;&#160;</span><span class="hcp14">&#160;&#160;&#160;</span>&#160;&#160;&#160;&#160;// Processing after error end</div>
<div class="FM_body1l"><span class="hcp14">&#160;&#160;&#160;</span><span class="hcp14">&#160;&#160;&#160;</span><span class="hcp14">&#160;&#160;&#160;</span>&#160;&#160;&#160;&#160;Operating := FALSE;</div>
<div class="FM_body1l">&#160;&#160;<span class="hcp14">&#160;&#160;&#160;</span>END_IF;</div>
<div class="FM_body1l">END_IF;</div>
</body>
</html>
