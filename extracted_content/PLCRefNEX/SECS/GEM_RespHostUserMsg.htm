
<!doctype HTML public "-//W3C//DTD HTML 4.0 Frameset//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
 <meta name="generator" content="Adobe RoboHelp 11">
<title>GEM_RespHostUserMsg</title>
<link rel="StyleSheet" href="SECS.css" type="text/css">
<style title="hcp" type="text/css">
<!--
table.hcp1 { padding-left:4.00pt;
padding-top:3.00pt;
padding-right:4.00pt;
padding-bottom:1.00pt; }
th.hcp2 { border-top:solid 1px #000000;
border-right:solid 1px #000000;
border-bottom:solid 1px #000000;
vertical-align:top;
padding-left:6.00pt;
padding-top:3.00pt;
padding-right:6.00pt;
padding-bottom:3.00pt; }
th.hcp3 { border-top:solid 1px #000000;
border-bottom:solid 1px #000000;
vertical-align:top;
padding-left:6.00pt;
padding-top:3.00pt;
padding-right:6.00pt;
padding-bottom:3.00pt; }
td.hcp4 { border-right:solid 1px #000000;
border-bottom:solid 1px #000000;
vertical-align:top;
padding-left:6.00pt;
padding-top:3.00pt;
padding-right:6.00pt;
padding-bottom:3.00pt; }
td.hcp5 { border-bottom:solid 1px #000000;
vertical-align:top;
padding-left:6.00pt;
padding-top:3.00pt;
padding-right:6.00pt;
padding-bottom:3.00pt; }
table.hcp6 { padding-top:5.00pt;
padding-right:4.00pt;
padding-bottom:1.00pt; }
td.hcp7 { vertical-align:top;
padding-left:6.00pt;
padding-top:3.00pt;
padding-right:6.00pt;
padding-bottom:3.00pt; }
table.hcp8 { margin-left:0.00pt;
margin-bottom:3.50pt;
margin-top:6.00pt; }
th.hcp9 { border-right:solid 1px #000000;
border-bottom:solid 1px #000000;
vertical-align:top;
padding-left:6.00pt;
padding-top:3.00pt;
padding-right:6.00pt;
padding-bottom:3.00pt; }
span.hcp10 { font-style:italic; }
span.hcp11 { word-spacing:normal;
font:6.0pt 'Times New Roman'; }
div.hcp12 { text-align:left; }
table.hcp13 { padding-top:6.00pt;
padding-right:4.00pt;
padding-bottom:1.00pt;
margin-left:31.18pt; }
td.hcp14 { border-left:solid 7px #000000;
border-bottom:solid 1px #000000;
vertical-align:top;
padding-left:6.00pt;
padding-top:3.00pt;
padding-right:6.00pt;
padding-bottom:3.00pt; }
table.hcp15 { padding-left:4.00pt;
padding-top:3.00pt;
padding-right:4.00pt;
padding-bottom:1.00pt;
margin-left:42.52pt; }
-->
</style>
</head>

<body>
<script type="text/javascript" src="../../ehlpdhtm.js" language="JavaScript1.2"></script>

<p class="Title">GEM_RespHostUserMsg</p>
<p class="FM_body1">The GEM_RespHostUserMsg instruction returns the user-defined 
 message with the specified message number as the reply for a user-defined 
 message received from the host.</p>

<table cellspacing="0" width="661" class="hcp1">
	<tr style="height: 25.00pt;" bgcolor="#B3B3B3">
		<th width="94" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Instruction</p></th>
		<th width="94" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Name</p></th>
		<th width="43" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">FB/</p>
		<p class="FM_tabletitlec9pt">FUN</p></th>
		<th width="236" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Graphic 
		 expression</p></th>
		<th width="194" bgcolor="#B3B3B3" class="hcp3"><p class="FM_tabletitlec9pt">ST expression</p></th>
	</tr>
	<tr style="height: 115.00pt;">
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">GEM_RespHostUserMsg</p></td>
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">Respond to Host-initiated User-defined 
		 Message</p></td>
		<td width="43" class="hcp4"><p 
			 class="FM_tablebody1c9pt">FB</p></td>
		<td style="border-right: solid 1px #000000; border-bottom: solid 1px #000000;" 
			 width="236"><div style="text-align: center;">
			<img alt="GEM_RespHostUserMsg_010.jpg" id="image97" src="GEM_RespHostUserMsg_010.jpg" border="0"> 
		</div>
		<p class="FM_fig">&#160;</p></td>
		<td width="194" class="hcp5"><p class="FM_tablebody1c9pt">GEM_RespHostUserMsg_<br>
		instance(</p>
		<p class="FM_tablebody1c9pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Execute,</p>
		<p class="FM_tablebody1c9pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;MsgNo,</p>
		<p class="FM_tablebody1c9pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Done,</p>
		<p class="FM_tablebody1c9pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Busy,</p>
		<p class="FM_tablebody1c9pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Error,</p>
		<p class="FM_tablebody1c9pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ErrorID);</p></td>
	</tr>
</table>


<table cellspacing="0" width="661" class="hcp6">
	<tr style="height: 20.00pt;" bgcolor="#B3B3B3">
		<td width="661" bgcolor="#B3B3B3" class="hcp7"><p class="FM_CRhead3">Variables</p></td>
	</tr>
</table>

<p class="FM_tablespec">&#160;</p>

<table cellspacing="0" width="661" class="hcp1">
	<tr style="height: 13.00pt;" bgcolor="#B3B3B3">
		<th width="94" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Name</p></th>
		<th width="113" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Meaning</p></th>
		<th width="60" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">I/O</p></th>
		<th width="189" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Description</p></th>
		<th width="98" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Valid 
		 range</p></th>
		<th width="53" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Unit</p></th>
		<th width="53" bgcolor="#B3B3B3" class="hcp3"><p class="FM_tabletitlec9pt">Default</p></th>
	</tr>
	<tr style="height: 25.00pt;">
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">MsgNo</p></td>
		<td width="113" class="hcp4"><p 
			 class="FM_tablebody1c9pt">Message number</p></td>
		<td width="60" class="hcp4"><p 
			 class="FM_tablebody1c9pt">Input</p></td>
		<td width="189" class="hcp4"><p 
			 class="FM_tablebody1c9pt">User-defined message number</p></td>
		<td width="98" class="hcp4"><p 
			 class="FM_tablebody1c9pt">Depends on data type.</p></td>
		<td width="53" class="hcp4"><p 
			 class="FM_tablebody1c9pt">---</p></td>
		<td width="53" class="hcp5"><p class="FM_tablebody1c9pt"><sup>*1</sup>&#160;</p></td>
	</tr>
</table>


<table width="661" class="hcp8">
	<tr>
		<td><p class="FM_tablebody1c9pt"><sup>*1</sup>If you omit an input 
		 parameter, the default value is not applied. A building error 
		 will occur.</p></td>
	</tr>
</table>


<table cellspacing="0" width="664" class="hcp1">
	<tr style="height: 37.00pt;" bgcolor="#B3B3B3">
		<th rowspan="2" width="77" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">&#160;</p></th>
		<th width="47" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Bool­ean</p></th>
		<th colspan="4" width="110" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Bit 
		 strings</p></th>
		<th colspan="8" width="226" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Integers</p></th>
		<th colspan="2" width="69" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Real 
		 num­bers</p></th>
		<th colspan="5" width="134" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Times, 
		 durations, dates, and text strings</p></th>
		
	</tr>
	<tr style="height: 43.00pt;" bgcolor="#B3B3B3">
		<th width="47" bgcolor="#B3B3B3" class="hcp9"><p class="FM_tabletitlec9pt">BOOL</p></th>
		<th width="26" bgcolor="#B3B3B3" class="hcp9"><p class="FM_tabletitlec9pt">BYTE</p></th>
		<th width="26" bgcolor="#B3B3B3" class="hcp9"><p class="FM_tabletitlec9pt">WORD</p></th>
		<th width="29" bgcolor="#B3B3B3" class="hcp9"><p class="FM_tabletitlec9pt">DWORD</p></th>
		<th width="29" bgcolor="#B3B3B3" class="hcp9"><p class="FM_tabletitlec9pt">LWORD</p></th>
		<th width="30" bgcolor="#B3B3B3" class="hcp9"><p class="FM_tabletitlec9pt">USINT</p></th>
		<th width="30" bgcolor="#B3B3B3" class="hcp9"><p class="FM_tabletitlec9pt">UINT</p></th>
		<th width="26" bgcolor="#B3B3B3" class="hcp9"><p class="FM_tabletitlec9pt">UDINT</p></th>
		<th width="26" bgcolor="#B3B3B3" class="hcp9"><p class="FM_tabletitlec9pt">ULINT</p></th>
		<th width="31" bgcolor="#B3B3B3" class="hcp9"><p class="FM_tabletitlec9pt">SINT</p></th>
		<th width="31" bgcolor="#B3B3B3" class="hcp9"><p class="FM_tabletitlec9pt">INT</p></th>
		<th width="26" bgcolor="#B3B3B3" class="hcp9"><p class="FM_tabletitlec9pt">DINT</p></th>
		<th width="26" bgcolor="#B3B3B3" class="hcp9"><p class="FM_tabletitlec9pt">LINT</p></th>
		<th width="34" bgcolor="#B3B3B3" class="hcp9"><p class="FM_tabletitlec9pt">REAL</p></th>
		<th width="34" bgcolor="#B3B3B3" class="hcp9"><p class="FM_tabletitlec9pt">LREAL</p></th>
		<th width="27" bgcolor="#B3B3B3" class="hcp9"><p class="FM_tabletitlec9pt">TIME</p></th>
		<th width="27" bgcolor="#B3B3B3" class="hcp9"><p class="FM_tabletitlec9pt">DATE</p></th>
		<th width="27" bgcolor="#B3B3B3" class="hcp9"><p class="FM_tabletitlec9pt">TOD</p></th>
		<th width="27" bgcolor="#B3B3B3" class="hcp9"><p class="FM_tabletitlec9pt">DT</p></th>
		<th style="border-bottom: solid 1px #000000; vertical-align: top; 
			 padding-left: 6.00pt; padding-top: 3.00pt; padding-right: 6.00pt; 
			 padding-bottom: 3.00pt;" width="27" bgcolor="#B3B3B3"><p class="FM_tabletitlec9pt">STRING</p></th>
	</tr>
	<tr style="height: 13.00pt;">
		<td width="77" class="hcp4"><p 
			 class="FM_tablebody1c9pt">MsgNo</p></td>
		<td width="47" class="hcp4"><p 
			 class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="26" class="hcp4"><p 
			 class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="26" class="hcp4"><p 
			 class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="29" class="hcp4"><p 
			 class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="29" class="hcp4"><p 
			 class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="30" class="hcp4"><p 
			 class="FM_tablebody1c9pt">OK</p></td>
		<td width="30" class="hcp4"><p 
			 class="FM_tablebody1c9pt">OK</p></td>
		<td width="26" class="hcp4"><p 
			 class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="26" class="hcp4"><p 
			 class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="31" class="hcp4"><p 
			 class="FM_tablebody1c9pt">OK</p></td>
		<td width="31" class="hcp4"><p 
			 class="FM_tablebody1c9pt">OK</p></td>
		<td width="26" class="hcp4"><p 
			 class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="26" class="hcp4"><p 
			 class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="34" class="hcp4"><p 
			 class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="34" class="hcp4"><p 
			 class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="27" class="hcp4"><p 
			 class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="27" class="hcp4"><p 
			 class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="27" class="hcp4"><p 
			 class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="27" class="hcp4"><p 
			 class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="27" class="hcp5"><p class="FM_tablebody1c9pt">&#160;</p></td>
	</tr>
</table>

<p class="FM_body1">&#160;</p>

<table cellspacing="0" width="661" class="hcp6">
	<tr style="height: 20.00pt;" bgcolor="#B3B3B3">
		<td width="661" bgcolor="#B3B3B3" class="hcp7"><p class="FM_CRhead3">Function</p></td>
	</tr>
</table>

<p class="FM_body1">The GEM_RespHostUserMsg instruction sends the user-defined 
 secondary message with the mes­sage number specified in <span class="hcp10">MsgNo</span>&#160;as 
 the reply for a user-defined primary message received from the host.</p>

<table cellspacing="0" width="661" class="hcp6">
	<tr style="height: 20.00pt;" bgcolor="#B3B3B3">
		<td width="661" bgcolor="#B3B3B3" class="hcp7"><p class="FM_CRhead3">Additional Information</p></td>
	</tr>
</table>

<p class="FM_bul1">•<span class="hcp11">&#160;&#160;&#160;&#160;</span>A 
 SECS message is sent if this instruction is executed and execution ends 
 normally. The SECS message exchange between the equipment and host is 
 given below.</p>
<div class="hcp12">
	<img alt="GEM_RespHostUserMsg_020.jpg" id="image98" src="GEM_RespHostUserMsg_020.jpg" border="0"> 
</div>
<p class="FM_fig">&#160;</p>

<table cellspacing="0" width="661" class="hcp6">
	<tr style="height: 20.00pt;" bgcolor="#B3B3B3">
		<td width="661" bgcolor="#B3B3B3" class="hcp7"><p class="FM_CRhead3">Related System-defined 
		 Variables</p></td>
	</tr>
</table>

<p class="FM_tabletitlec9pt">&#160;</p>

<table cellspacing="0" width="661" class="hcp1">
	<tr style="height: 13.00pt;" bgcolor="#B3B3B3">
		<th width="151" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Name</p></th>
		<th width="151" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Meaning</p></th>
		<th width="94" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Data 
		 type</p></th>
		<th width="265" bgcolor="#B3B3B3" class="hcp3"><p class="FM_tabletitlec9pt">Description</p></th>
	</tr>
	<tr style="height: 57.40pt;">
		<td width="151" class="hcp4"><p 
			 class="FM_tablebody1c9pt">_GEM_BusyHostUser<br>
		Msg</p></td>
		<td width="151" class="hcp4"><p 
			 class="FM_tablebody1c9pt">Host-initiated User-defined Message 
		 Transaction Processing Flag</p></td>
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">BOOL</p></td>
		<td width="265" class="hcp5"><p class="FM_tablebody1c9pt">Gives 
		 the processing status of a host-initiated user-defined message 
		 transaction.<sup>*1</sup>&#160;<sup>*2</sup></p>
		<p class="FM_tablebody1c9pt">TRUE: Processing</p>
		<p class="FM_tablebody1c9pt">FALSE: Not processing</p></td>
	</tr>
	<tr style="height: 37.00pt;">
		<td width="151" class="hcp4"><p 
			 class="FM_tablebody1c9pt">_GEM_HostUserMsgNo</p></td>
		<td width="151" class="hcp4"><p 
			 class="FM_tablebody1c9pt">Host-initiated User-defined Message 
		 Number</p></td>
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">UINT</p></td>
		<td width="265" class="hcp5"><p class="FM_tablebody1c9pt">Gives 
		 the number of the received host-initiated user-defined message.</p></td>
	</tr>
	<tr style="height: 28.00pt;">
		<td width="151" class="hcp4"><p 
			 class="FM_tablebody1c9pt">_GEM_ServiceStatus</p></td>
		<td width="151" class="hcp4"><p 
			 class="FM_tablebody1c9pt">GEM Service Status</p></td>
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">_sGEM_SER­VICE_STATUS</p></td>
		<td width="265" class="hcp5"><p class="FM_tablebody1c9pt">Gives 
		 the GEM Service status.</p>
		<p class="FM_tablebody1c9pt">Refer to <a href="GEM_SystemVariables.htm#A206_GEM_Service_Status">GEM 
		 Service statu</a>s for details.</p></td>
	</tr>
</table>


<table width="661" class="hcp8">
	<tr>
		<td><p class="FM_tablebody1c9pt"><sup>*1</sup>This variable changes 
		 to TRUE when a user-defined primary message (Sx,Fy) is received 
		 from the host. It will change to FALSE when execution of the instruction 
		 is completed normally.</p>
		<p class="FM_tablebody1c9pt"><sup>*2</sup>If the W bit of the primary 
		 message is set to OFF on the SECS/GEM Configurator, this variable 
		 changes to FALSE after sending the primary message is completed.</p></td>
	</tr>
</table>

<p class="FM_body1">&#160;</p>

<table cellspacing="0" width="661" class="hcp6">
	<tr style="height: 20.00pt;" bgcolor="#B3B3B3">
		<td width="661" bgcolor="#B3B3B3" class="hcp7"><p class="FM_CRhead3">Related Error Codes</p></td>
	</tr>
</table>

<p class="FM_tabletitlec9pt">&#160;</p>

<table cellspacing="0" width="661" class="hcp1">
	<tr style="height: 13.00pt;" bgcolor="#B3B3B3">
		<th width="94" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Error 
		 code</p></th>
		<th width="227" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Name</p></th>
		<th width="340" bgcolor="#B3B3B3" class="hcp3"><p class="FM_tabletitlec9pt">Description</p></th>
	</tr>
	<tr style="height: 25.00pt;">
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">16#041D</p></td>
		<td width="227" class="hcp4"><p 
			 class="FM_tablebody1c9pt">Exceeded Simultaneous Instruction 
		 Exe­cuted Resources</p></td>
		<td width="340" class="hcp5"><p class="FM_tablebody1c9pt">The 
		 number of simultaneously executed GEM instructions exceeded the 
		 limit.</p></td>
	</tr>
	<tr style="height: 25.00pt;">
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">16#3822</p></td>
		<td width="227" class="hcp4"><p 
			 class="FM_tablebody1c9pt">Invalid Setting</p></td>
		<td width="340" class="hcp5"><p class="FM_tablebody1c9pt">A 
		 message number that was disabled on the SECS/GEM Con­figurator 
		 was specified in <span class="hcp10">MsgNo</span>.</p></td>
	</tr>
	<tr style="height: 25.00pt;">
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">16#3827</p></td>
		<td width="227" class="hcp4"><p 
			 class="FM_tablebody1c9pt">Undefined Message Number</p></td>
		<td width="340" class="hcp5"><p class="FM_tablebody1c9pt">A 
		 value that was not defined in user-defined messages on the SECS/GEM 
		 Configurator was specified in <span class="hcp10">MsgNo</span>.</p></td>
	</tr>
	<tr style="height: 25.00pt;">
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">16#3838</p></td>
		<td width="227" class="hcp4"><p 
			 class="FM_tablebody1c9pt">Illegal Message</p></td>
		<td width="340" class="hcp5"><p class="FM_tablebody1c9pt">The 
		 received SECS message (Sx,Fy) was set to a message that was not 
		 (Sx,Fy+1).</p></td>
	</tr>
	<tr style="height: 25.00pt;">
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">16#3810</p></td>
		<td width="227" class="hcp4"><p 
			 class="FM_tablebody1c9pt">GEM Service Status in Initializing</p></td>
		<td width="340" class="hcp5"><p class="FM_tablebody1c9pt">The 
		 instruction was executed when the GEM Service status was Initializing.</p></td>
	</tr>
	<tr style="height: 25.00pt;">
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">16#3811</p></td>
		<td width="227" class="hcp4"><p 
			 class="FM_tablebody1c9pt">GEM Service Status in EQStarting</p></td>
		<td width="340" class="hcp5"><p class="FM_tablebody1c9pt">The 
		 instruction was executed when the GEM Service status was EQStarting.</p></td>
	</tr>
	<tr style="height: 25.00pt;">
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">16#3812</p></td>
		<td width="227" class="hcp4"><p 
			 class="FM_tablebody1c9pt">GEM Service Status in EQInitializing</p></td>
		<td width="340" class="hcp5"><p class="FM_tablebody1c9pt">The 
		 instruction was executed when the GEM Service status was EQInitializing.</p></td>
	</tr>
	<tr style="height: 25.00pt;">
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">16#3814</p></td>
		<td width="227" class="hcp4"><p 
			 class="FM_tablebody1c9pt">GEM Service Status in Stop</p></td>
		<td width="340" class="hcp5"><p class="FM_tablebody1c9pt">The 
		 instruction was executed when the GEM Service status was Stop.</p></td>
	</tr>
	<tr style="height: 25.00pt;">
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">16#3815</p></td>
		<td width="227" class="hcp4"><p 
			 class="FM_tablebody1c9pt">GEM Service Status in Error</p></td>
		<td width="340" class="hcp5"><p class="FM_tablebody1c9pt">The 
		 instruction was executed when the GEM Service status was Error.</p></td>
	</tr>
	<tr style="height: 25.00pt;">
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">16#3816</p></td>
		<td width="227" class="hcp4"><p 
			 class="FM_tablebody1c9pt">GEM Service Status in ShuttingDown</p></td>
		<td width="340" class="hcp5"><p class="FM_tablebody1c9pt">The 
		 instruction was executed when the GEM Service status was ShuttingDown.</p></td>
	</tr>
	<tr style="height: 25.00pt;">
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">16#3817</p></td>
		<td width="227" class="hcp4"><p 
			 class="FM_tablebody1c9pt">GEM Service Status in Shutdown</p></td>
		<td width="340" class="hcp5"><p class="FM_tablebody1c9pt">The 
		 instruction was executed when the GEM Service status was Shutdown.</p></td>
	</tr>
	<tr style="height: 25.00pt;">
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">16#3818</p></td>
		<td width="227" class="hcp4"><p 
			 class="FM_tablebody1c9pt">No Message Received</p></td>
		<td width="340" class="hcp5"><p class="FM_tablebody1c9pt">The 
		 instruction was executed without receiving a user-defined message 
		 from the host.</p></td>
	</tr>
</table>

<p class="FM_body1">&#160;</p>

<table cellspacing="0" width="661" class="hcp6">
	<tr style="height: 20.00pt;" bgcolor="#B3B3B3">
		<td width="661" bgcolor="#B3B3B3" class="hcp7"><p class="FM_CRhead3">Precautions for Correct 
		 Use</p></td>
	</tr>
</table>

<p class="FM_bul1">•<span class="hcp11">&#160;&#160;&#160;&#160;</span>Before 
 executing the instruction, confirm that all of the following conditions 
 are met. If the instruction is executed when any of these conditions is 
 not met, an error will occur and <span class="hcp10">Error</span>&#160;will 
 change to TRUE.</p>
<p class="FM_bul1">a)<span class="hcp11">&#160;&#160;&#160;</span>The 
 <span class="hcp10">_GEM_ServiceStatus</span>&#160;must 
 be <span class="hcp10">EQRun</span>.</p>
<p class="FM_bul1">b)<span class="hcp11">&#160;&#160;&#160;</span><span class="hcp10">_GEM_BusyHostUserMsg</span> must be FALSE.</p>
<p class="FM_bul1">•<span class="hcp11">&#160;&#160;&#160;&#160;</span>In 
 the following cases, the <span class="hcp10">_GEM_BusyHostUserMsg</span>&#160;does 
 not change to TRUE even if a user-defined primary message (Sx,Fy) is received.</p>
<p class="FM_bul1">a)<span class="hcp11">&#160;&#160;&#160;</span>The 
 SECS message (S,F) registered on the SECS/GEM Configurator does not match 
 its items.</p>
<p class="FM_body1">&#160;</p>

<table cellspacing="0" width="661" class="hcp6">
	<tr style="height: 20.00pt;" bgcolor="#B3B3B3">
		<td width="661" bgcolor="#B3B3B3" class="hcp7"><p class="FM_CRhead3">Application Procedure</p></td>
	</tr>
</table>

<p class="FM_body1">Use the following procedure for this instruction.</p>
<p class="FM_list1"><span class="FM_list1num">1<span class="hcp11">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span></span>Detecting 
 the User-defined Message from Host</p>
<p class="FM_listbody1">Confirm that <span class="hcp10">_GEM_BusyHostUserMsg</span> 
 changes from FALSE to TRUE.</p>
<p class="FM_list1next"><span class="FM_list1num">2<span class="hcp11">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span></span>Confirming 
 the Received Data for the User-defined Message</p>
<p class="FM_listbody1">Check the received message number that was stored 
 in <span class="hcp10">_GEM_HostUserMsgNo</span>. Check 
 the user-defined variables for the message number and perform required 
 processing.</p>
<p class="FM_list1next"><span class="FM_list1num">3<span class="hcp11">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span></span>Returning 
 the User-defined Message</p>
<p class="FM_listbody1">Specify the message number for which to send a 
 reply in the <span class="hcp10">MsgNo</span>&#160;input 
 variable and execute the instruction. The user-defined message is sent 
 to the host as the reply.</p>
<p class="FM_body1">&#160;</p>

<table cellspacing="0" width="661" class="hcp6">
	<tr style="height: 20.00pt;" bgcolor="#B3B3B3">
		<td width="661" bgcolor="#B3B3B3" class="hcp7"><p class="FM_CRhead3">Sample Programming</p></td>
	</tr>
</table>

<p class="FM_body1">This sample sends the user-defined message 
 with message number 4 as the reply for the user-defined message with message 
 number 3 from the host.</p>

<table cellspacing="0" width="620" class="hcp13">
	<tr style="height: 21.00pt;">
		<td width="620" class="hcp14"><p 
			 class="FM_CRhead3">SECS/GEM Configurator</p></td>
	</tr>
</table>

<p class="FM_body1">First, the following user-defined messages are created 
 on the SECS/GEM Configurator.</p>

<table cellspacing="0" width="605" class="hcp15">
	<tr style="height: 25.00pt;" bgcolor="#B3B3B3">
		<th width="68" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Message 
		 number</p></th>
		<th width="30" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">S/F</p></th>
		<th width="60" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Branch 
		 number</p></th>
		<th width="68" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Enabled/<br>
		disabled</p></th>
		<th width="68" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Direction</p></th>
		<th width="49" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Reply</p></th>
		<th width="53" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Abbre­viation</p></th>
		<th width="76" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Message 
		 name</p></th>
		<th width="72" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Message 
		 structure</p></th>
		<th width="60" bgcolor="#B3B3B3" class="hcp3"><p class="FM_tabletitlec9pt">Link <br>
		variable</p></th>
	</tr>
	<tr style="height: 25.00pt;">
		<td width="68" class="hcp4"><p 
			 class="FM_tablebody19pt">3</p></td>
		<td width="30" class="hcp4"><p 
			 class="FM_tablebody19pt">&#160;</p></td>
		<td width="60" class="hcp4"><p 
			 class="FM_tablebody19pt">1</p></td>
		<td width="68" class="hcp4"><p 
			 class="FM_tablebody19pt">Enabled</p></td>
		<td width="68" class="hcp4"><p 
			 class="FM_tablebody19pt">H &#8594; E</p></td>
		<td width="49" class="hcp4"><p 
			 class="FM_tablebody19pt">Yes</p></td>
		<td width="53" class="hcp4"><p 
			 class="FM_tablebody19pt">TEST1</p></td>
		<td width="76" class="hcp4"><p 
			 class="FM_tablebody19pt">Sample Request</p></td>
		<td width="72" class="hcp4"><p 
			 class="FM_tablebody19pt">&lt;B&gt;</p></td>
		<td width="60" class="hcp5"><p class="FM_tablebody19pt">&#160;</p></td>
	</tr>
	<tr style="height: 25.00pt;">
		<td width="68" class="hcp4"><p 
			 class="FM_tablebody19pt">4</p></td>
		<td width="30" class="hcp4"><p 
			 class="FM_tablebody19pt">&#160;</p></td>
		<td width="60" class="hcp4"><p 
			 class="FM_tablebody19pt">1</p></td>
		<td width="68" class="hcp4"><p 
			 class="FM_tablebody19pt">Enabled</p></td>
		<td width="68" class="hcp4"><p 
			 class="FM_tablebody19pt">H &#8592; E</p></td>
		<td width="49" class="hcp4"><p 
			 class="FM_tablebody19pt">---</p></td>
		<td width="53" class="hcp4"><p 
			 class="FM_tablebody19pt">TEST2</p></td>
		<td width="76" class="hcp4"><p 
			 class="FM_tablebody19pt">Sample Data</p></td>
		<td width="72" class="hcp4"><p 
			 class="FM_tablebody19pt">&lt;B&gt;</p></td>
		<td width="60" class="hcp5"><p class="FM_tablebody19pt">&#160;</p></td>
	</tr>
</table>

<p class="FM_body1">&#160;</p>
<p class="FM_body1">Next, enter the programming on the Sysmac Studio.</p>

<table cellspacing="0" width="620" class="hcp13">
	<tr style="height: 21.00pt;">
		<td width="620" class="hcp14"><p 
			 class="FM_CRhead3">LD</p></td>
	</tr>
</table>

<p class="FM_tabletitlec9pt">&#160;</p>

<table cellspacing="0" width="605" class="hcp15">
	<tr style="height: 25.00pt;" bgcolor="#B3B3B3">
		<th width="76" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Internal 
		 Variables</p></th>
		<th width="166" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Variable</p></th>
		<th width="94" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Data 
		 type</p></th>
		<th width="60" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Initial 
		 value</p></th>
		<th width="208" bgcolor="#B3B3B3" class="hcp3"><p class="FM_tabletitlec9pt">Comment</p></th>
	</tr>
	<tr style="height: 13.00pt;">
		<td rowspan="2" width="76" class="hcp5"><p class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="166" class="hcp4"><p 
			 class="FM_tablebody1c9pt">varMsgNo</p></td>
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">UINT</p></td>
		<td width="60" class="hcp4"><p 
			 class="FM_tablebody1c9pt">0</p></td>
		<td width="208" class="hcp5"><p class="FM_tablebody1c9pt">Message 
		 number</p></td>
	</tr>
	<tr style="height: 25.00pt;">
		<td width="166" class="hcp4"><p 
			 class="FM_tablebody1c9pt">RespHostUserMsg _instance</p></td>
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">GEM_Resp<br>
		HostUserMsg</p></td>
		<td width="60" class="hcp4"><p 
			 class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="208" class="hcp5"><p class="FM_tablebody1c9pt">Instance 
		 of GEM_RespHostUs­erMsg instruction</p></td>
	</tr>
</table>

<p class="FM_tabletitlec9pt">&#160;</p>

<table cellspacing="0" width="605" class="hcp15">
	<tr style="height: 25.00pt;" bgcolor="#B3B3B3">
		<th width="76" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">External 
		 Variables</p></th>
		<th width="174" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Variable</p></th>
		<th width="355" bgcolor="#B3B3B3" class="hcp3"><p class="FM_tabletitlec9pt">Comment</p></th>
	</tr>
	<tr style="height: 13.00pt;">
		<td rowspan="3" width="76" class="hcp7"><p class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="174" class="hcp4"><p 
			 class="FM_tablebody1c9pt">_GEM_ServiceStatus</p></td>
		<td width="355" class="hcp5"><p class="FM_tablebody1c9pt">GEM 
		 Service status</p></td>
	</tr>
	<tr style="height: 25.00pt;">
		<td width="174" class="hcp4"><p 
			 class="FM_tablebody1c9pt">_GEM_BusyHostUserMsg</p></td>
		<td width="355" class="hcp5"><p class="FM_tablebody1c9pt">Host-initiated 
		 User-defined Message Transaction Processing Flag</p></td>
	</tr>
	<tr style="height: 13.00pt;">
		<td width="174" class="hcp4"><p 
			 class="FM_tablebody1c9pt">_GEM_HostUserMsgNo</p></td>
		<td width="355" class="hcp5"><p class="FM_tablebody1c9pt">Host-initiated 
		 User-defined Message Number</p></td>
	</tr>
</table>

<p class="FM_body1">&#160;</p>
<div class="hcp12">
	<img alt="GEM_RespHostUserMsg_030.jpg" id="image99" src="GEM_RespHostUserMsg_030.jpg" border="0"> 
</div>
<p class="FM_tablespec">&#160;</p>

<table cellspacing="0" width="620" class="hcp13">
	<tr style="height: 21.00pt;">
		<td width="620" class="hcp14"><p 
			 class="FM_CRhead3">ST</p></td>
	</tr>
</table>

<p class="FM_tabletitlec9pt">&#160;</p>

<table cellspacing="0" width="605" class="hcp15">
	<tr style="height: 25.00pt;" bgcolor="#B3B3B3">
		<th width="76" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Internal 
		 Variables</p></th>
		<th width="166" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Variable</p></th>
		<th width="94" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Data 
		 type</p></th>
		<th width="60" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Initial 
		 value</p></th>
		<th width="208" bgcolor="#B3B3B3" class="hcp3"><p class="FM_tabletitlec9pt">Comment</p></th>
	</tr>
	<tr style="height: 25.00pt;">
		<td rowspan="5" width="76" class="hcp5"><p class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="166" class="hcp4"><p 
			 class="FM_tablebody1c9pt">RespHostUserMsg _instance</p></td>
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">GEM_Resp<br>
		HostUserMsg</p></td>
		<td width="60" class="hcp4"><p 
			 class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="208" class="hcp5"><p class="FM_tablebody1c9pt">Instance 
		 of GEM_RespHostUs­erMsg instruction</p></td>
	</tr>
	<tr style="height: 13.00pt;">
		<td width="166" class="hcp4"><p 
			 class="FM_tablebody1c9pt">R_TRIG_instance</p></td>
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">R_TRIG</p></td>
		<td width="60" class="hcp4"><p 
			 class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="208" class="hcp5"><p class="FM_tablebody1c9pt">Instance 
		 of R_TRIG instruction</p></td>
	</tr>
	<tr style="height: 52.00pt;">
		<td width="166" class="hcp4"><p 
			 class="FM_tablebody1c9pt">Trigger</p></td>
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">BOOL</p></td>
		<td width="60" class="hcp4"><p 
			 class="FM_tablebody1c9pt">FALSE</p></td>
		<td width="208" class="hcp5"><p class="FM_tablebody1c9pt">Flag 
		 for FALSE to TRUE change in <span class="hcp10">SendTerminalMsg_Start</span></p>
		<p class="FM_tablebody1c9pt">Flag for TRUE to FALSE change in <span class="hcp10">_GEM_BusyEquipTerminalMsg</span></p></td>
	</tr>
	<tr style="height: 13.00pt;">
		<td width="166" class="hcp4"><p 
			 class="FM_tablebody1c9pt">Stage</p></td>
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">INT</p></td>
		<td width="60" class="hcp4"><p 
			 class="FM_tablebody1c9pt">0</p></td>
		<td width="208" class="hcp5"><p class="FM_tablebody1c9pt">Program 
		 execution status</p></td>
	</tr>
	<tr style="height: 13.00pt;">
		<td width="166" class="hcp4"><p 
			 class="FM_tablebody1c9pt">varMsgNo</p></td>
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">UINT</p></td>
		<td width="60" class="hcp4"><p 
			 class="FM_tablebody1c9pt">0</p></td>
		<td width="208" class="hcp5"><p class="FM_tablebody1c9pt">Message 
		 number</p></td>
	</tr>
</table>

<p class="FM_tabletitlec9pt">&#160;</p>

<table cellspacing="0" width="605" class="hcp15">
	<tr style="height: 25.00pt;" bgcolor="#B3B3B3">
		<th width="76" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">External 
		 Variables</p></th>
		<th width="174" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Variable</p></th>
		<th width="355" bgcolor="#B3B3B3" class="hcp3"><p class="FM_tabletitlec9pt">Comment</p></th>
	</tr>
	<tr style="height: 13.00pt;">
		<td rowspan="3" width="76" class="hcp7"><p class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="174" class="hcp4"><p 
			 class="FM_tablebody1c9pt">_GEM_ServiceStatus</p></td>
		<td width="355" class="hcp5"><p class="FM_tablebody1c9pt">GEM 
		 Service status</p></td>
	</tr>
	<tr style="height: 25.00pt;">
		<td width="174" class="hcp4"><p 
			 class="FM_tablebody1c9pt">_GEM_BusyHostUserMsg</p></td>
		<td width="355" class="hcp5"><p class="FM_tablebody1c9pt">Host-initiated 
		 User-defined Message Transaction Processing Flag</p></td>
	</tr>
	<tr style="height: 13.00pt;">
		<td width="174" class="hcp4"><p 
			 class="FM_tablebody1c9pt">_GEM_HostUserMsgNo</p></td>
		<td width="355" class="hcp5"><p class="FM_tablebody1c9pt">Host-initiated 
		 User-defined Message Number</p></td>
	</tr>
</table>

<p class="FM_body1">&#160;</p>
<div class="FM_body1l">
	CASE Stage Of 
</div>
<div class="FM_body1l">
	0: // Notification of reception from host 
</div>
<div class="FM_body1l">
	&#160;&#160;R_TRIG_instance(_GEM_BusyHostUserMsg, Trigger ); 
</div>
<div class="FM_body1l">
	&#160;&#160;IF( Trigger = TRUE )THEN 
</div>
<div class="FM_body1l">
	&#160;&#160;&#160;// Judgement 
</div>
<div class="FM_body1l">
	&#160;&#160;&#160;&#160;IF(_GEM_HostUserMsgNo = 3 ) THEN 
</div>
<div class="FM_body1l">
	&#160;&#160;&#160;&#160;&#160;&#160;VarMsgNo:= UINT#4; 
</div>
<div class="FM_body1l">
	&#160;&#160;&#160;&#160;END_IF; 
</div>
<div class="FM_body1l">
	&#160;&#160;&#160;// Initialization 
</div>
<div class="FM_body1l">
	&#160;&#160;&#160;&#160;RespHostUserMsg_instance ( Execute:=FALSE, 
	 MsgNo := VarMsgNo ); 
</div>
<div class="FM_body1l">
	&#160;&#160;&#160;&#160;Stage:=1; 
</div>
<div class="FM_body1l">
	&#160;&#160;END_IF; 
</div>
<div class="FM_body1l">
	1:// Reply to host. 
</div>
<div class="FM_body1l">
	&#160;&#160;RespHostUserMsg_instance( Execute:=TRUE, MsgNo := VarMsgNo 
	 ); 
</div>
<div class="FM_body1l">
	&#160;&#160;IF(RespHostUserMsg_instance.Done = TRUE ) THEN 
</div>
<div class="FM_body1l">
	&#160;&#160;&#160;&#160;Stage := 10; 
</div>
<div class="FM_body1l">
	&#160;&#160;ELSIF(RespHostUserMsg_instance.Error = TRUE ) THEN 
</div>
<div class="FM_body1l">
	&#160;&#160;&#160;// Add error processing as required. 
</div>
<div class="FM_body1l">
	&#160;&#160;&#160;&#160;Stage := 10; 
</div>
<div class="FM_body1l">
	&#160;&#160;END_IF; 
</div>
<div class="FM_body1l">
	10: // End 
</div>
<div class="FM_body1l">
	&#160;&#160;Stage := 0; 
</div>
<div class="FM_body1l">
	END_CASE; 
</div>
<p class="FM_tablespec">&#160;</p>
<p class="FM_tablespec">&#160;</p>
</body>
</html>
