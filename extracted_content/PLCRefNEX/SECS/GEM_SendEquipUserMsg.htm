
<!doctype HTML public "-//W3C//DTD HTML 4.0 Frameset//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
 <meta name="generator" content="Adobe RoboHelp 11">
<title>GEM_SendEquipUserMsg</title>
<link rel="StyleSheet" href="SECS.css" type="text/css">
<style title="hcp" type="text/css">
<!--
table.hcp1 { padding-left:4.00pt;
padding-top:3.00pt;
padding-right:4.00pt;
padding-bottom:1.00pt; }
th.hcp2 { border-top:solid 1px #000000;
border-right:solid 1px #000000;
border-bottom:solid 1px #000000;
vertical-align:top;
padding-left:6.00pt;
padding-top:3.00pt;
padding-right:6.00pt;
padding-bottom:3.00pt; }
th.hcp3 { border-top:solid 1px #000000;
border-bottom:solid 1px #000000;
vertical-align:top;
padding-left:6.00pt;
padding-top:3.00pt;
padding-right:6.00pt;
padding-bottom:3.00pt; }
td.hcp4 { border-right:solid 1px #000000;
border-bottom:solid 1px #000000;
vertical-align:top;
padding-left:6.00pt;
padding-top:3.00pt;
padding-right:6.00pt;
padding-bottom:3.00pt; }
td.hcp5 { border-bottom:solid 1px #000000;
vertical-align:top;
padding-left:6.00pt;
padding-top:3.00pt;
padding-right:6.00pt;
padding-bottom:3.00pt; }
table.hcp6 { padding-top:5.00pt;
padding-right:4.00pt;
padding-bottom:1.00pt; }
td.hcp7 { vertical-align:top;
padding-left:6.00pt;
padding-top:3.00pt;
padding-right:6.00pt;
padding-bottom:3.00pt; }
table.hcp8 { margin-left:0.00pt;
margin-bottom:3.50pt;
margin-top:6.00pt; }
th.hcp9 { border-right:solid 1px #000000;
border-bottom:solid 1px #000000;
vertical-align:top;
padding-left:6.00pt;
padding-top:3.00pt;
padding-right:6.00pt;
padding-bottom:3.00pt; }
span.hcp10 { font-style:italic; }
span.hcp11 { word-spacing:normal;
font:6.0pt 'Times New Roman'; }
div.hcp12 { text-align:left; }
table.hcp13 { padding-top:6.00pt;
padding-right:4.00pt;
padding-bottom:1.00pt;
margin-left:31.18pt; }
td.hcp14 { border-left:solid 7px #000000;
border-bottom:solid 1px #000000;
vertical-align:top;
padding-left:6.00pt;
padding-top:3.00pt;
padding-right:6.00pt;
padding-bottom:3.00pt; }
table.hcp15 { padding-left:4.00pt;
padding-top:3.00pt;
padding-right:4.00pt;
padding-bottom:1.00pt;
margin-left:42.52pt; }
-->
</style>
</head>

<body>
<script type="text/javascript" src="../../ehlpdhtm.js" language="JavaScript1.2"></script>

<p class="Title">GEM_SendEquipUserMsg</p>
<p class="FM_body1">The GEM_SendEquipUserMsg sends a user-defined message 
 to the host.</p>

<table cellspacing="0" width="661" class="hcp1">
	<tr style="height: 25.00pt;" bgcolor="#B3B3B3">
		<th width="94" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Instruction</p></th>
		<th width="94" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Name</p></th>
		<th width="43" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">FB/</p>
		<p class="FM_tabletitlec9pt">FUN</p></th>
		<th width="236" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Graphic 
		 expression</p></th>
		<th width="194" bgcolor="#B3B3B3" class="hcp3"><p class="FM_tabletitlec9pt">ST expression</p></th>
	</tr>
	<tr style="height: 115.00pt;">
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">GEM_Send<br>
		EquipUser<br>
		Msg</p></td>
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">Send Equip­ment-initiated User-defined 
		 Message</p></td>
		<td width="43" class="hcp4"><p 
			 class="FM_tablebody1c9pt">FB</p></td>
		<td style="border-right: solid 1px #000000; border-bottom: solid 1px #000000;" 
			 width="236"><div style="text-align: center;">
			<img alt="GEM_SendEquipUserMsg_010.jpg" id="image94" src="GEM_SendEquipUserMsg_010.jpg" border="0"> 
		</div>
		<p class="FM_fig">&#160;</p></td>
		<td width="194" class="hcp5"><p class="FM_tablebody1c9pt">GEM_SendEquipUserMsg_<br>
		instance(</p>
		<p class="FM_tablebody1c9pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Execute,</p>
		<p class="FM_tablebody1c9pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;MsgNo,</p>
		<p class="FM_tablebody1c9pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Done,</p>
		<p class="FM_tablebody1c9pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Busy,</p>
		<p class="FM_tablebody1c9pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Error,</p>
		<p class="FM_tablebody1c9pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ErrorID);</p></td>
	</tr>
</table>

<p class="FM_CRhead3">&#160;</p>

<table cellspacing="0" width="661" class="hcp6">
	<tr style="height: 20.00pt;" bgcolor="#B3B3B3">
		<td width="661" bgcolor="#B3B3B3" class="hcp7"><p class="FM_CRhead3">Variables</p></td>
	</tr>
</table>

<p class="FM_tablespec">&#160;</p>

<table cellspacing="0" width="661" class="hcp1">
	<tr style="height: 13.00pt;" bgcolor="#B3B3B3">
		<th width="94" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Name</p></th>
		<th width="113" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Meaning</p></th>
		<th width="60" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">I/O</p></th>
		<th width="189" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Description</p></th>
		<th width="98" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Valid 
		 range</p></th>
		<th width="53" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Unit</p></th>
		<th width="53" bgcolor="#B3B3B3" class="hcp3"><p class="FM_tabletitlec9pt">Default</p></th>
	</tr>
	<tr style="height: 25.00pt;">
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">MsgNo</p></td>
		<td width="113" class="hcp4"><p 
			 class="FM_tablebody1c9pt">Message number</p></td>
		<td width="60" class="hcp4"><p 
			 class="FM_tablebody1c9pt">Input</p></td>
		<td width="189" class="hcp4"><p 
			 class="FM_tablebody1c9pt">User-defined message number</p></td>
		<td width="98" class="hcp4"><p 
			 class="FM_tablebody1c9pt">Depends on data type.</p></td>
		<td width="53" class="hcp4"><p 
			 class="FM_tablebody1c9pt">---</p></td>
		<td width="53" class="hcp5"><p class="FM_tablebody1c9pt"><sup>*1</sup>&#160;</p></td>
	</tr>
</table>


<table width="661" class="hcp8">
	<tr>
		<td><p class="FM_tablebody1c9pt"><sup>*1</sup>If you omit an input 
		 parameter, the default value is not applied. A building error 
		 will occur.</p></td>
	</tr>
</table>


<table cellspacing="0" width="664" class="hcp1">
	<tr style="height: 37.00pt;" bgcolor="#B3B3B3">
		<th rowspan="2" width="77" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">&#160;</p></th>
		<th width="47" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Bool­ean</p></th>
		<th colspan="4" width="110" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Bit 
		 strings</p></th>
		<th colspan="8" width="226" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Integers</p></th>
		<th colspan="2" width="69" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Real 
		 num­bers</p></th>
		<th colspan="5" width="134" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Times, 
		 durations, dates, and text strings</p></th>
		
	</tr>
	<tr style="height: 43.00pt;" bgcolor="#B3B3B3">
		<th width="47" bgcolor="#B3B3B3" class="hcp9"><p class="FM_tabletitlec9pt">BOOL</p></th>
		<th width="26" bgcolor="#B3B3B3" class="hcp9"><p class="FM_tabletitlec9pt">BYTE</p></th>
		<th width="26" bgcolor="#B3B3B3" class="hcp9"><p class="FM_tabletitlec9pt">WORD</p></th>
		<th width="29" bgcolor="#B3B3B3" class="hcp9"><p class="FM_tabletitlec9pt">DWORD</p></th>
		<th width="29" bgcolor="#B3B3B3" class="hcp9"><p class="FM_tabletitlec9pt">LWORD</p></th>
		<th width="30" bgcolor="#B3B3B3" class="hcp9"><p class="FM_tabletitlec9pt">USINT</p></th>
		<th width="30" bgcolor="#B3B3B3" class="hcp9"><p class="FM_tabletitlec9pt">UINT</p></th>
		<th width="26" bgcolor="#B3B3B3" class="hcp9"><p class="FM_tabletitlec9pt">UDINT</p></th>
		<th width="26" bgcolor="#B3B3B3" class="hcp9"><p class="FM_tabletitlec9pt">ULINT</p></th>
		<th width="31" bgcolor="#B3B3B3" class="hcp9"><p class="FM_tabletitlec9pt">SINT</p></th>
		<th width="31" bgcolor="#B3B3B3" class="hcp9"><p class="FM_tabletitlec9pt">INT</p></th>
		<th width="26" bgcolor="#B3B3B3" class="hcp9"><p class="FM_tabletitlec9pt">DINT</p></th>
		<th width="26" bgcolor="#B3B3B3" class="hcp9"><p class="FM_tabletitlec9pt">LINT</p></th>
		<th width="34" bgcolor="#B3B3B3" class="hcp9"><p class="FM_tabletitlec9pt">REAL</p></th>
		<th width="34" bgcolor="#B3B3B3" class="hcp9"><p class="FM_tabletitlec9pt">LREAL</p></th>
		<th width="27" bgcolor="#B3B3B3" class="hcp9"><p class="FM_tabletitlec9pt">TIME</p></th>
		<th width="27" bgcolor="#B3B3B3" class="hcp9"><p class="FM_tabletitlec9pt">DATE</p></th>
		<th width="27" bgcolor="#B3B3B3" class="hcp9"><p class="FM_tabletitlec9pt">TOD</p></th>
		<th width="27" bgcolor="#B3B3B3" class="hcp9"><p class="FM_tabletitlec9pt">DT</p></th>
		<th style="border-bottom: solid 1px #000000; vertical-align: top; 
			 padding-left: 6.00pt; padding-top: 3.00pt; padding-right: 6.00pt; 
			 padding-bottom: 3.00pt;" width="27" bgcolor="#B3B3B3"><p class="FM_tabletitlec9pt">STRING</p></th>
	</tr>
	<tr style="height: 13.00pt;">
		<td width="77" class="hcp4"><p 
			 class="FM_tablebody1c9pt">MsgNo</p></td>
		<td width="47" class="hcp4"><p 
			 class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="26" class="hcp4"><p 
			 class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="26" class="hcp4"><p 
			 class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="29" class="hcp4"><p 
			 class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="29" class="hcp4"><p 
			 class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="30" class="hcp4"><p 
			 class="FM_tablebody1c9pt">OK</p></td>
		<td width="30" class="hcp4"><p 
			 class="FM_tablebody1c9pt">OK</p></td>
		<td width="26" class="hcp4"><p 
			 class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="26" class="hcp4"><p 
			 class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="31" class="hcp4"><p 
			 class="FM_tablebody1c9pt">OK</p></td>
		<td width="31" class="hcp4"><p 
			 class="FM_tablebody1c9pt">OK</p></td>
		<td width="26" class="hcp4"><p 
			 class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="26" class="hcp4"><p 
			 class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="34" class="hcp4"><p 
			 class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="34" class="hcp4"><p 
			 class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="27" class="hcp4"><p 
			 class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="27" class="hcp4"><p 
			 class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="27" class="hcp4"><p 
			 class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="27" class="hcp4"><p 
			 class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="27" class="hcp5"><p class="FM_tablebody1c9pt">&#160;</p></td>
	</tr>
</table>

<p class="FM_body1">&#160;</p>

<table cellspacing="0" width="661" class="hcp6">
	<tr style="height: 20.00pt;" bgcolor="#B3B3B3">
		<td width="661" bgcolor="#B3B3B3" class="hcp7"><p class="FM_CRhead3">Function</p></td>
	</tr>
</table>

<p class="FM_body1">The GEM_SendEquipUserMsg instruction sends the user-defined 
 message specified with message number <span class="hcp10">MsgNo</span> 
 to the host.</p>
<p class="FM_body1">The result of sending the user-defined message is stored 
 in <span class="hcp10">_GEM_EquipUserMsgRslt</span>.</p>

<table cellspacing="0" width="661" class="hcp6">
	<tr style="height: 20.00pt;" bgcolor="#B3B3B3">
		<td width="661" bgcolor="#B3B3B3" class="hcp7"><p class="FM_CRhead3">Additional Information</p></td>
	</tr>
</table>

<p class="FM_bul1">•<span class="hcp11">&#160;&#160;&#160;&#160;</span>A 
 SECS message is sent if this instruction is executed and execution ends 
 normally. The SECS message exchange between the equipment and host is 
 given below.</p>
<div class="hcp12">
	<img alt="GEM_SendEquipUserMsg_020.jpg" id="image95" src="GEM_SendEquipUserMsg_020.jpg" border="0"> 
</div>
<p class="FM_body1">&#160;</p>

<table cellspacing="0" width="661" class="hcp6">
	<tr style="height: 20.00pt;" bgcolor="#B3B3B3">
		<td width="661" bgcolor="#B3B3B3" class="hcp7"><p class="FM_CRhead3">Related System-defined 
		 Variables</p></td>
	</tr>
</table>

<p class="FM_tabletitlec9pt">&#160;</p>

<table cellspacing="0" width="661" class="hcp1">
	<tr style="height: 13.00pt;" bgcolor="#B3B3B3">
		<th width="151" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Name</p></th>
		<th width="151" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Meaning</p></th>
		<th width="94" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Data 
		 type</p></th>
		<th width="265" bgcolor="#B3B3B3" class="hcp3"><p class="FM_tabletitlec9pt">Description</p></th>
	</tr>
	<tr style="height: 69.40pt;">
		<td width="151" class="hcp4"><p 
			 class="FM_tablebody1c9pt">_GEM_BusyEquipUs­erMsg</p></td>
		<td width="151" class="hcp4"><p 
			 class="FM_tablebody1c9pt">Equipment-initiated User-defined 
		 Message Transaction Processing Flag</p></td>
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">BOOL</p></td>
		<td width="265" class="hcp5"><p class="FM_tablebody1c9pt">Gives 
		 the processing status of an equip­ment-initiated user-defined 
		 message transac­tion.<sup>*1</sup>&#160;<sup>*2</sup></p>
		<p class="FM_tablebody1c9pt">TRUE: Processing</p>
		<p class="FM_tablebody1c9pt">FALSE: Not processing</p></td>
	</tr>
	<tr style="height: 37.00pt;">
		<td width="151" class="hcp4"><p 
			 class="FM_tablebody1c9pt">_GEM_EquipUserMsgNo</p></td>
		<td width="151" class="hcp4"><p 
			 class="FM_tablebody1c9pt">Equipment-initiated User-defined 
		 Message Number</p></td>
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">UINT</p></td>
		<td width="265" class="hcp5"><p class="FM_tablebody1c9pt">Gives 
		 the number of a received equipment-initi­ated user-defined message.</p></td>
	</tr>
	<tr style="height: 40.00pt;">
		<td width="151" class="hcp4"><p 
			 class="FM_tablebody1c9pt">_GEM_EquipUserMsgRslt</p></td>
		<td width="151" class="hcp4"><p 
			 class="FM_tablebody1c9pt">Equipment-initiated User-defined 
		 Message Results</p></td>
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">_sGEM_RSLT</p></td>
		<td width="265" class="hcp5"><p class="FM_tablebody1c9pt">Gives 
		 the results of an equipment-initiated user-defined message.</p>
		<p class="FM_tablebody1c9pt">Refer to&#160;<a href="GEM_SystemVariables.htm#A222_User-defined_Messages">user-defined 
		 message</a> for details.</p></td>
	</tr>
	<tr style="height: 37.00pt;">
		<td width="151" class="hcp4"><p 
			 class="FM_tablebody1c9pt">_GEM_ServiceStatus</p></td>
		<td width="151" class="hcp4"><p 
			 class="FM_tablebody1c9pt">GEM Service Status</p></td>
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">_sGEM_<br>
		SERVICE_<br>
		STATUS</p></td>
		<td width="265" class="hcp5"><p class="FM_tablebody1c9pt">Gives 
		 the GEM Service status.</p>
		<p class="FM_tablebody1c9pt">Refer to <a href="GEM_SystemVariables.htm#A206_GEM_Service_Status">GEM 
		 Service status</a> for details.</p></td>
	</tr>
</table>


<table width="661" class="hcp8">
	<tr>
		<td><p class="FM_tablebody1c9pt"><sup>*1</sup>This variable changes 
		 to TRUE when the instruction ends normally. It changes to FALSE 
		 when transaction processing is completed.</p>
		<p class="FM_tablebody1c9pt"><sup>*2</sup>If you specify on the 
		 SECS/GEM Configurator that a reply for the primary message is 
		 not necessary and then execute the instruction with the <span class="hcp10">MsgNo</span> input variable set to 
		 0, this variable changes to FALSE.</p></td>
	</tr>
</table>

<p class="FM_body1">&#160;</p>

<table cellspacing="0" width="661" class="hcp6">
	<tr style="height: 20.00pt;" bgcolor="#B3B3B3">
		<td width="661" bgcolor="#B3B3B3" class="hcp7"><p class="FM_CRhead3">Related Error Codes</p></td>
	</tr>
</table>

<p class="FM_tabletitlec9pt">&#160;</p>

<table cellspacing="0" width="661" class="hcp1">
	<tr style="height: 13.00pt;" bgcolor="#B3B3B3">
		<th width="94" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Error 
		 code</p></th>
		<th width="227" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Name</p></th>
		<th width="340" bgcolor="#B3B3B3" class="hcp3"><p class="FM_tabletitlec9pt">Description</p></th>
	</tr>
	<tr style="height: 25.00pt;">
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">16#041D</p></td>
		<td width="227" class="hcp4"><p 
			 class="FM_tablebody1c9pt">Exceeded Simultaneous Instruction 
		 Exe­cuted Resources</p></td>
		<td width="340" class="hcp5"><p class="FM_tablebody1c9pt">The 
		 number of simultaneously executed GEM instructions exceeded the 
		 limit.</p></td>
	</tr>
	<tr style="height: 25.00pt;">
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">16#3822</p></td>
		<td width="227" class="hcp4"><p 
			 class="FM_tablebody1c9pt">Invalid Setting</p></td>
		<td width="340" class="hcp5"><p class="FM_tablebody1c9pt">A 
		 message number that was disabled on the SECS/GEM Con­figurator 
		 was specified in <span class="hcp10">MsgNo</span>.</p></td>
	</tr>
	<tr style="height: 37.00pt;">
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">16#3827</p></td>
		<td width="227" class="hcp4"><p 
			 class="FM_tablebody1c9pt">Undefined Message Number</p></td>
		<td width="340" class="hcp5"><p class="FM_tablebody1c9pt">A 
		 message number that was not defined in user-defined mes­sages 
		 on the SECS/GEM Configurator was specified in <span class="hcp10">MsgNo</span>.</p></td>
	</tr>
	<tr style="height: 25.00pt;">
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">16#3838</p></td>
		<td width="227" class="hcp4"><p 
			 class="FM_tablebody1c9pt">Illegal Message</p></td>
		<td width="340" class="hcp5"><p class="FM_tablebody1c9pt">A 
		 message number for which an even function number is reg­istered 
		 was specified in <span class="hcp10">MsgNo</span>.</p></td>
	</tr>
	<tr style="height: 25.00pt;">
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">16#3810</p></td>
		<td width="227" class="hcp4"><p 
			 class="FM_tablebody1c9pt">GEM Service Status in Initializing</p></td>
		<td width="340" class="hcp5"><p class="FM_tablebody1c9pt">The 
		 instruction was executed when the GEM Service status was Initializing.</p></td>
	</tr>
	<tr style="height: 25.00pt;">
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">16#3811</p></td>
		<td width="227" class="hcp4"><p 
			 class="FM_tablebody1c9pt">GEM Service Status in EQStarting</p></td>
		<td width="340" class="hcp5"><p class="FM_tablebody1c9pt">The 
		 instruction was executed when the GEM Service status was EQStarting.</p></td>
	</tr>
	<tr style="height: 25.00pt;">
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">16#3812</p></td>
		<td width="227" class="hcp4"><p 
			 class="FM_tablebody1c9pt">GEM Service Status in EQInitializing</p></td>
		<td width="340" class="hcp5"><p class="FM_tablebody1c9pt">The 
		 instruction was executed when the GEM Service status was EQInitializing.</p></td>
	</tr>
	<tr style="height: 25.00pt;">
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">16#3814</p></td>
		<td width="227" class="hcp4"><p 
			 class="FM_tablebody1c9pt">GEM Service Status in Stop</p></td>
		<td width="340" class="hcp5"><p class="FM_tablebody1c9pt">The 
		 instruction was executed when the GEM Service status was Stop.</p></td>
	</tr>
	<tr style="height: 25.00pt;">
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">16#3815</p></td>
		<td width="227" class="hcp4"><p 
			 class="FM_tablebody1c9pt">GEM Service Status in Error</p></td>
		<td width="340" class="hcp5"><p class="FM_tablebody1c9pt">The 
		 instruction was executed when the GEM Service status was Error.</p></td>
	</tr>
	<tr style="height: 25.00pt;">
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">16#3816</p></td>
		<td width="227" class="hcp4"><p 
			 class="FM_tablebody1c9pt">GEM Service Status in ShuttingDown</p></td>
		<td width="340" class="hcp5"><p class="FM_tablebody1c9pt">The 
		 instruction was executed when the GEM Service status was ShuttingDown.</p></td>
	</tr>
	<tr style="height: 25.00pt;">
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">16#3817</p></td>
		<td width="227" class="hcp4"><p 
			 class="FM_tablebody1c9pt">GEM Service Status in Shutdown</p></td>
		<td width="340" class="hcp5"><p class="FM_tablebody1c9pt">The 
		 instruction was executed when the GEM Service status was Shutdown.</p></td>
	</tr>
	<tr style="height: 25.00pt;">
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">16#3819</p></td>
		<td width="227" class="hcp4"><p 
			 class="FM_tablebody1c9pt">Multi-execution of Instructions</p></td>
		<td width="340" class="hcp5"><p class="FM_tablebody1c9pt">Transaction 
		 processing is not completed for a previous execu­tion of the same 
		 instruction.</p></td>
	</tr>
	<tr style="height: 25.00pt;">
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">16#381B</p></td>
		<td width="227" class="hcp4"><p 
			 class="FM_tablebody1c9pt">Insufficient Transaction Resources</p></td>
		<td width="340" class="hcp5"><p class="FM_tablebody1c9pt">When 
		 the instruction was executed, the limit to the number of transactions 
		 that can be buffered had been reached.</p></td>
	</tr>
</table>

<p class="FM_body1">&#160;</p>

<table cellspacing="0" width="661" class="hcp6">
	<tr style="height: 20.00pt;" bgcolor="#B3B3B3">
		<td width="661" bgcolor="#B3B3B3" class="hcp7"><p class="FM_CRhead3">Precautions for Correct 
		 Use</p></td>
	</tr>
</table>

<p class="FM_bul1">•<span class="hcp11">&#160;&#160;&#160;&#160;</span>Before 
 executing the instruction, confirm that all of the following conditions 
 are met. If the instruction is executed when any of these conditions is 
 not met, an error will occur and <span class="hcp10">Error</span>&#160;will 
 change to TRUE.</p>
<p class="FM_bul1">a)<span class="hcp11">&#160;&#160;&#160;</span><span class="hcp10">_GEM_ServiceStatus</span>&#160;must be 
 <span class="hcp10">EQRun</span>.</p>
<p class="FM_bul1">b)<span class="hcp11">&#160;&#160;&#160;</span><span class="hcp10">_GEM_BusyEquipUserMsg</span> must be FALSE.</p>
<p class="FM_bul1">•<span class="hcp11">&#160;&#160;&#160;&#160;</span>Access 
 <span class="hcp10">_GEM_EquipUserMsgRslt</span>&#160;after 
 <span class="hcp10">_GEM_BusyEquipUserMsg</span> changes 
 from TRUE to FALSE.</p>
<p class="FM_bul1">&#160;</p>

<table cellspacing="0" width="661" class="hcp6">
	<tr style="height: 20.00pt;" bgcolor="#B3B3B3">
		<td width="661" bgcolor="#B3B3B3" class="hcp7"><p class="FM_CRhead3">Application Procedure</p></td>
	</tr>
</table>

<p class="FM_body1">Use the following procedure for this instruction.</p>
<p class="FM_list1"><span class="FM_list1num">1<span class="hcp11">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span></span>Storing 
 the Data to Send</p>
<p class="FM_listbody1">Store the required information in user-defined 
 variables for the message number to send.</p>
<p class="FM_list1next"><span class="FM_list1num">2<span class="hcp11">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span></span>Sending 
 the User-defined Message</p>
<p class="FM_listbody1">Specify the message number to send in the <span class="hcp10">MsgNo</span>&#160;input variable and execute 
 the instruction. The user-defined message is sent to the host.</p>
<p class="FM_list1next"><span class="FM_list1num">3<span class="hcp11">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span></span>Confirming 
 the Result of Sending the User-defined Message</p>
<p class="FM_listbody1">Check the result of sending the user-defined message 
 in <span class="hcp10">GEM_EquipUserMsgRslt</span>&#160;after 
 <span class="hcp10">_GEM_BusyEquipUserMsg</span> changes 
 to FALSE.</p>
<p class="FM_bul1">&#160;</p>

<table cellspacing="0" width="661" class="hcp6">
	<tr style="height: 20.00pt;" bgcolor="#B3B3B3">
		<td width="661" bgcolor="#B3B3B3" class="hcp7"><p class="FM_CRhead3">Sample Programming</p></td>
	</tr>
</table>

<p class="FM_body1">This sample sends a user-defined message.</p>
<p class="FM_body1">Loopback Diagnostic Request (S2,F25) is used in this 
 example.</p>
<p class="FM_body1">A loopback message is sent and the reply data is checked.</p>
<p class="FM_body1">&#160;</p>
<p class="FM_body1">If the GEM Service status is EQRun and the <span class="hcp10">SendEquipUserMsg_Start</span>&#160;internal 
 variable changes from FALSE to TRUE, a user-defined message is sent.</p>
<p class="FM_body1">&#160;</p>

<table cellspacing="0" width="620" class="hcp13">
	<tr style="height: 21.00pt;">
		<td width="620" class="hcp14"><p 
			 class="FM_CRhead3">SECS/GEM Configurator</p></td>
	</tr>
</table>

<p class="FM_body1">First, the following user-defined messages are created 
 on the SECS/GEM Configurator.</p>

<table cellspacing="0" width="609" class="hcp15">
	<tr style="height: 37.00pt;" bgcolor="#B3B3B3">
		<th width="72" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Message 
		 number</p></th>
		<th width="53" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">S/F</p></th>
		<th width="53" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Branch 
		 num­ber</p></th>
		<th width="68" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Enabled/<br>
		disabled</p></th>
		<th width="49" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Direc­tion</p></th>
		<th width="49" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Reply</p></th>
		<th width="49" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Abbrevia­tion</p></th>
		<th width="72" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Message 
		 name</p></th>
		<th width="68" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Message 
		 structure</p></th>
		<th width="76" bgcolor="#B3B3B3" class="hcp3"><p class="FM_tabletitlec9pt">Link <br>
		variable</p></th>
	</tr>
	<tr style="height: 37.00pt;">
		<td width="72" class="hcp4"><p 
			 class="FM_tablebody19pt">1</p></td>
		<td width="53" class="hcp4"><p 
			 class="FM_tablebody19pt">S2F25</p></td>
		<td width="53" class="hcp4"><p 
			 class="FM_tablebody19pt">1</p></td>
		<td width="68" class="hcp4"><p 
			 class="FM_tablebody19pt">Enabled</p></td>
		<td width="49" class="hcp4"><p 
			 class="FM_tablebody19pt">H &#8592; E</p></td>
		<td width="49" class="hcp4"><p 
			 class="FM_tablebody19pt">Yes</p></td>
		<td width="49" class="hcp4"><p 
			 class="FM_tablebody19pt">LDR</p></td>
		<td width="72" class="hcp4"><p 
			 class="FM_tablebody19pt">Loopback Diagnostic Request</p></td>
		<td width="68" class="hcp4"><p 
			 class="FM_tablebody19pt">&lt;B&gt;</p></td>
		<td width="76" class="hcp5"><p class="FM_tablebody1c9pt" 
													 style="text-align: center;">S2F25<br>
		_00001_Var</p></td>
	</tr>
	<tr style="height: 37.00pt;">
		<td width="72" class="hcp4"><p 
			 class="FM_tablebody19pt">2</p></td>
		<td width="53" class="hcp4"><p 
			 class="FM_tablebody19pt">S2F26</p></td>
		<td width="53" class="hcp4"><p 
			 class="FM_tablebody19pt">1</p></td>
		<td width="68" class="hcp4"><p 
			 class="FM_tablebody19pt">Enabled</p></td>
		<td width="49" class="hcp4"><p 
			 class="FM_tablebody19pt">H &#8594; E</p></td>
		<td width="49" class="hcp4"><p 
			 class="FM_tablebody19pt">---</p></td>
		<td width="49" class="hcp4"><p 
			 class="FM_tablebody19pt">LDD</p></td>
		<td width="72" class="hcp4"><p 
			 class="FM_tablebody19pt">Loopback Diagnostic Data</p></td>
		<td width="68" class="hcp4"><p 
			 class="FM_tablebody19pt">&lt;B&gt;</p></td>
		<td width="76" class="hcp5"><p class="FM_tablebody1c9pt" 
													 style="text-align: center;">S2F26<br>
		_00002_Var</p></td>
	</tr>
</table>

<p class="FM_body1">&#160;</p>
<p class="FM_body1">Next, enter the programming on the Sysmac Studio.</p>

<table cellspacing="0" width="620" class="hcp13">
	<tr style="height: 21.00pt;">
		<td width="620" class="hcp14"><p 
			 class="FM_CRhead3">LD</p></td>
	</tr>
</table>

<p class="FM_tabletitlec9pt">&#160;</p>

<table cellspacing="0" width="605" class="hcp15">
	<tr style="height: 25.00pt;" bgcolor="#B3B3B3">
		<th width="76" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Internal 
		 Variables</p></th>
		<th width="166" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Variable</p></th>
		<th width="106" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Data 
		 type</p></th>
		<th width="60" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Initial 
		 value</p></th>
		<th width="197" bgcolor="#B3B3B3" class="hcp3"><p class="FM_tabletitlec9pt">Comment</p></th>
	</tr>
	<tr style="height: 37.00pt;">
		<td rowspan="7" width="76" class="hcp7"><p class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="166" class="hcp4"><p 
			 class="FM_tablebody1c9pt">SendEquipUserMsg_Start</p></td>
		<td width="106" class="hcp4"><p 
			 class="FM_tablebody1c9pt">BOOL</p></td>
		<td width="60" class="hcp4"><p 
			 class="FM_tablebody1c9pt">FALSE</p></td>
		<td width="197" class="hcp5"><p class="FM_tablebody1c9pt">Flag 
		 to start sending equip­ment-initiated user-defined mes­sage</p></td>
	</tr>
	<tr style="height: 25.00pt;">
		<td width="166" class="hcp4"><p 
			 class="FM_tablebody1c9pt">SendEquipUserMsg _in­stance</p></td>
		<td width="106" class="hcp4"><p 
			 class="FM_tablebody1c9pt">GEM_Send<br>
		EquipUserMsg</p></td>
		<td width="60" class="hcp4"><p 
			 class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="197" class="hcp5"><p class="FM_tablebody1c9pt">Instance 
		 of GEM_SendEquipUs­erMsg instruction</p></td>
	</tr>
	<tr style="height: 37.00pt;">
		<td width="166" class="hcp4"><p 
			 class="FM_tablebody1c9pt">SendEquipUserMsg _Wait­Resp</p></td>
		<td width="106" class="hcp4"><p 
			 class="FM_tablebody1c9pt">BOOL</p></td>
		<td width="60" class="hcp4"><p 
			 class="FM_tablebody1c9pt">FALSE</p></td>
		<td width="197" class="hcp5"><p class="FM_tablebody1c9pt">Flag 
		 that indicates waiting for com­pletion of sending equipment-initi­ated 
		 user-defined message</p></td>
	</tr>
	<tr style="height: 37.00pt;">
		<td width="166" class="hcp4"><p 
			 class="FM_tablebody1c9pt">SendEquipUserMsg _Com­plete</p></td>
		<td width="106" class="hcp4"><p 
			 class="FM_tablebody1c9pt">BOOL</p></td>
		<td width="60" class="hcp4"><p 
			 class="FM_tablebody1c9pt">FALSE</p></td>
		<td width="197" class="hcp5"><p class="FM_tablebody1c9pt">Flag 
		 that indicates completion of sending equipment-initiated user-defined 
		 message</p></td>
	</tr>
	<tr style="height: 13.00pt;">
		<td width="166" class="hcp4"><p 
			 class="FM_tablebody1c9pt">varMsgNo</p></td>
		<td width="106" class="hcp4"><p 
			 class="FM_tablebody1c9pt">UINT</p></td>
		<td width="60" class="hcp4"><p 
			 class="FM_tablebody1c9pt">0</p></td>
		<td width="197" class="hcp5"><p class="FM_tablebody1c9pt">Message 
		 number</p></td>
	</tr>
	<tr style="height: 13.00pt;">
		<td width="166" class="hcp4"><p 
			 class="FM_tablebody1c9pt">LoopbackRslt</p></td>
		<td width="106" class="hcp4"><p 
			 class="FM_tablebody1c9pt">BOOL</p></td>
		<td width="60" class="hcp4"><p 
			 class="FM_tablebody1c9pt">FALSE</p></td>
		<td width="197" class="hcp5"><p class="FM_tablebody1c9pt">Loopback 
		 check result</p></td>
	</tr>
	<tr style="height: 121.00pt;">
		<td width="166" class="hcp4"><p 
			 class="FM_tablebody1c9pt">LoopbackSendData</p></td>
		<td width="106" class="hcp4"><p 
			 class="FM_tablebody1c9pt">ARRAY[0..9] OF BYTE</p></td>
		<td width="60" class="hcp4"><p 
			 class="FM_tablebody1c9pt">[16#01, 16#23, 16#45, 16#67, 16#89, 
		 16#01, 16#23, 16#45, 16#67, 16#89]</p></td>
		<td width="197" class="hcp5"><p class="FM_tablebody1c9pt">Loopback 
		 send data</p></td>
	</tr>
</table>

<p class="FM_tabletitlec9pt">&#160;</p>

<table cellspacing="0" width="605" class="hcp15">
	<tr style="height: 25.00pt;" bgcolor="#B3B3B3">
		<th width="76" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">External 
		 Variables</p></th>
		<th width="174" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Variable</p></th>
		<th width="355" bgcolor="#B3B3B3" class="hcp3"><p class="FM_tabletitlec9pt">Comment</p></th>
	</tr>
	<tr style="height: 13.00pt;">
		<td rowspan="6" width="76" class="hcp7"><p class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="174" class="hcp4"><p 
			 class="FM_tablebody1c9pt">_GEM_ServiceStatus</p></td>
		<td width="355" class="hcp5"><p class="FM_tablebody1c9pt">GEM 
		 Service status</p></td>
	</tr>
	<tr style="height: 25.00pt;">
		<td width="174" class="hcp4"><p 
			 class="FM_tablebody1c9pt">_GEM_BusyEquipUserMsg</p></td>
		<td width="355" class="hcp5"><p class="FM_tablebody1c9pt">Equipment-initiated 
		 User-defined Message Transaction Process­ing Flag</p></td>
	</tr>
	<tr style="height: 13.00pt;">
		<td width="174" class="hcp4"><p 
			 class="FM_tablebody1c9pt">_GEM_EquipUserMsgRslt</p></td>
		<td width="355" class="hcp5"><p class="FM_tablebody1c9pt">Send 
		 Equipment-initiated User-defined Message Result</p></td>
	</tr>
	<tr style="height: 13.00pt;">
		<td width="174" class="hcp4"><p 
			 class="FM_tablebody1c9pt">_GEM_EquipUserMsgNo</p></td>
		<td width="355" class="hcp5"><p class="FM_tablebody1c9pt">Equipment-initiated 
		 User-defined Message Number</p></td>
	</tr>
	<tr style="height: 13.00pt;">
		<td width="174" class="hcp4"><p 
			 class="FM_tablebody1c9pt">S2F25_00001_Var</p></td>
		<td width="355" class="hcp5"><p class="FM_tablebody1c9pt">Link 
		 variable for message to send for loopback diagnosis</p></td>
	</tr>
	<tr style="height: 13.00pt;">
		<td width="174" class="hcp4"><p 
			 class="FM_tablebody1c9pt">S2F26_00002_Var</p></td>
		<td width="355" class="hcp5"><p class="FM_tablebody1c9pt">Link 
		 variable for message to receive for loopback diagnosis</p></td>
	</tr>
</table>

<p class="FM_body1">&#160;</p>
<div class="hcp12">
	<img alt="GEM_SendEquipUserMsg_030.jpg" id="image96" src="GEM_SendEquipUserMsg_030.jpg" border="0"> 
</div>
<p class="FM_fig">&#160;</p>

<table cellspacing="0" width="620" class="hcp13">
	<tr style="height: 21.00pt;">
		<td width="620" class="hcp14"><p 
			 class="FM_CRhead3">ST</p></td>
	</tr>
</table>

<p class="FM_tabletitlec9pt">&#160;</p>

<table cellspacing="0" width="605" class="hcp15">
	<tr style="height: 25.00pt;" bgcolor="#B3B3B3">
		<th width="76" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Internal 
		 Variables</p></th>
		<th width="166" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Variable</p></th>
		<th width="106" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Data 
		 type</p></th>
		<th width="60" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Initial 
		 value</p></th>
		<th width="197" bgcolor="#B3B3B3" class="hcp3"><p class="FM_tabletitlec9pt">Comment</p></th>
	</tr>
	<tr style="height: 37.00pt;">
		<td rowspan="9" width="76" class="hcp7"><p class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="166" class="hcp4"><p 
			 class="FM_tablebody1c9pt">SendEquipUserMsg_Start</p></td>
		<td width="106" class="hcp4"><p 
			 class="FM_tablebody1c9pt">BOOL</p></td>
		<td width="60" class="hcp4"><p 
			 class="FM_tablebody1c9pt">FALSE</p></td>
		<td width="197" class="hcp5"><p class="FM_tablebody1c9pt">Flag 
		 to start sending the equip­ment-initiated user-defined mes­sage</p></td>
	</tr>
	<tr style="height: 25.00pt;">
		<td width="166" class="hcp4"><p 
			 class="FM_tablebody1c9pt">SendEquipUserMsg _in­stance</p></td>
		<td width="106" class="hcp4"><p 
			 class="FM_tablebody1c9pt">GEM_Send<br>
		EquipUserMsg</p></td>
		<td width="60" class="hcp4"><p 
			 class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="197" class="hcp5"><p class="FM_tablebody1c9pt">Instance 
		 of GEM_SendEquipUs­erMsg instruction</p></td>
	</tr>
	<tr style="height: 13.00pt;">
		<td width="166" class="hcp4"><p 
			 class="FM_tablebody1c9pt">R_TRIG_instance</p></td>
		<td width="106" class="hcp4"><p 
			 class="FM_tablebody1c9pt">R_TRIG</p></td>
		<td width="60" class="hcp4"><p 
			 class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="197" class="hcp5"><p class="FM_tablebody1c9pt">Instance 
		 of R_TRIG instruction</p></td>
	</tr>
	<tr style="height: 13.00pt;">
		<td width="166" class="hcp4"><p 
			 class="FM_tablebody1c9pt">F_TRIG_instance</p></td>
		<td width="106" class="hcp4"><p 
			 class="FM_tablebody1c9pt">F_TRIG</p></td>
		<td width="60" class="hcp4"><p 
			 class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="197" class="hcp5"><p class="FM_tablebody1c9pt">Instance 
		 of F_TRIG instruction</p></td>
	</tr>
	<tr style="height: 52.00pt;">
		<td width="166" class="hcp4"><p 
			 class="FM_tablebody1c9pt">Trigger</p></td>
		<td width="106" class="hcp4"><p 
			 class="FM_tablebody1c9pt">BOOL</p></td>
		<td width="60" class="hcp4"><p 
			 class="FM_tablebody1c9pt">FALSE</p></td>
		<td width="197" class="hcp5"><p class="FM_tablebody1c9pt">Flag 
		 for FALSE to TRUE change in <span class="hcp10">SendTerminalMsg_Start</span></p>
		<p class="FM_tablebody1c9pt">Flag for TRUE to FALSE change in <span class="hcp10">_GEM_BusyEquipTerminalMsg</span></p></td>
	</tr>
	<tr style="height: 13.00pt;">
		<td width="166" class="hcp4"><p 
			 class="FM_tablebody1c9pt">Stage</p></td>
		<td width="106" class="hcp4"><p 
			 class="FM_tablebody1c9pt">INT</p></td>
		<td width="60" class="hcp4"><p 
			 class="FM_tablebody1c9pt">0</p></td>
		<td width="197" class="hcp5"><p class="FM_tablebody1c9pt">Program 
		 execution status</p></td>
	</tr>
	<tr style="height: 13.00pt;">
		<td width="166" class="hcp4"><p 
			 class="FM_tablebody1c9pt">varMsgNo</p></td>
		<td width="106" class="hcp4"><p 
			 class="FM_tablebody1c9pt">UINT</p></td>
		<td width="60" class="hcp4"><p 
			 class="FM_tablebody1c9pt">0</p></td>
		<td width="197" class="hcp5"><p class="FM_tablebody1c9pt">Message 
		 number</p></td>
	</tr>
	<tr style="height: 13.00pt;">
		<td width="166" class="hcp4"><p 
			 class="FM_tablebody1c9pt">LoopbackRslt</p></td>
		<td width="106" class="hcp4"><p 
			 class="FM_tablebody1c9pt">BOOL</p></td>
		<td width="60" class="hcp4"><p 
			 class="FM_tablebody1c9pt">FALSE</p></td>
		<td width="197" class="hcp5"><p class="FM_tablebody1c9pt">Loopback 
		 check result</p></td>
	</tr>
	<tr style="height: 121.00pt;">
		<td width="166" class="hcp4"><p 
			 class="FM_tablebody1c9pt">LoopbackSendData</p></td>
		<td width="106" class="hcp4"><p 
			 class="FM_tablebody1c9pt">ARRAY[0..9] OF BYTE</p></td>
		<td width="60" class="hcp4"><p 
			 class="FM_tablebody1c9pt">[16#01, 16#23, 16#45, 16#67, 16#89, 
		 16#01, 16#23, 16#45, 16#67, 16#89]</p></td>
		<td width="197" class="hcp5"><p class="FM_tablebody1c9pt">Loopback 
		 send data</p></td>
	</tr>
</table>

<p class="FM_tabletitlec9pt">&#160;</p>

<table cellspacing="0" width="605" class="hcp15">
	<tr style="height: 25.00pt;" bgcolor="#B3B3B3">
		<th width="76" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">External 
		 Variables</p></th>
		<th width="174" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Variable</p></th>
		<th width="355" bgcolor="#B3B3B3" class="hcp3"><p class="FM_tabletitlec9pt">Comment</p></th>
	</tr>
	<tr style="height: 13.00pt;">
		<td rowspan="6" width="76" class="hcp7"><p class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="174" class="hcp4"><p 
			 class="FM_tablebody1c9pt">_GEM_ServiceStatus</p></td>
		<td width="355" class="hcp5"><p class="FM_tablebody1c9pt">GEM 
		 Service status</p></td>
	</tr>
	<tr style="height: 25.00pt;">
		<td width="174" class="hcp4"><p 
			 class="FM_tablebody1c9pt">_GEM_BusyEquipUserMsg</p></td>
		<td width="355" class="hcp5"><p class="FM_tablebody1c9pt">Equipment-initiated 
		 User-defined Message Transaction Process­ing Flag</p></td>
	</tr>
	<tr style="height: 13.00pt;">
		<td width="174" class="hcp4"><p 
			 class="FM_tablebody1c9pt">_GEM_EquipUserMsgRslt</p></td>
		<td width="355" class="hcp5"><p class="FM_tablebody1c9pt">Send 
		 Equipment-initiated User-defined Message Result</p></td>
	</tr>
	<tr style="height: 13.00pt;">
		<td width="174" class="hcp4"><p 
			 class="FM_tablebody1c9pt">_GEM_EquipUserMsgNo</p></td>
		<td width="355" class="hcp5"><p class="FM_tablebody1c9pt">Equipment-initiated 
		 User-defined Message Number</p></td>
	</tr>
	<tr style="height: 13.00pt;">
		<td width="174" class="hcp4"><p 
			 class="FM_tablebody1c9pt">S2F25_00001_Var</p></td>
		<td width="355" class="hcp5"><p class="FM_tablebody1c9pt">Link 
		 variable for message to send for loopback diagnosis</p></td>
	</tr>
	<tr style="height: 13.00pt;">
		<td width="174" class="hcp4"><p 
			 class="FM_tablebody1c9pt">S2F26_00002_Var</p></td>
		<td width="355" class="hcp5"><p class="FM_tablebody1c9pt">Link 
		 variable for message to receive for loopback diagnosis</p></td>
	</tr>
</table>

<p class="FM_body1">&#160;</p>
<div class="FM_body1l">
	CASE Stage Of 
</div>
<div class="FM_body1l">
	0: // Start 
</div>
<div class="FM_body1l">
	&#160;&#160;&#160;&#160;R_TRIG_instance( RequestChangeTime_Start, Trigger 
	 ); 
</div>
<div class="FM_body1l">
	&#160;&#160;&#160;&#160;IF( (Trigger = TRUE) AND ( _GEM_ServiceStatus.EQRun 
	 = TRUE ) ) THEN 
</div>
<div class="FM_body1l">
	&#160;&#160;&#160;&#160;&#160;&#160;&#160;// Initialization 
</div>
<div class="FM_body1l">
	&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RequestChangeTime_instance( 
	 Execute:=FALSE ); 
</div>
<div class="FM_body1l">
	&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Stage := 1; 
</div>
<div class="FM_body1l">
	&#160;&#160;&#160;&#160;END_IF; 
</div>
<div class="FM_body1l">
	1: // Request time change. 
</div>
<div class="FM_body1l">
	&#160;&#160;&#160;&#160;RequestChangeTime_instance( Execute:=TRUE ); 
	 
</div>
<div class="FM_body1l">
	&#160;&#160;&#160;&#160;IF( RequestChangeTime_instance.Done = TRUE 
	 ) THEN 
</div>
<div class="FM_body1l">
	&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Stage := 2; 
</div>
<div class="FM_body1l">
	&#160;&#160;&#160;&#160;ELSIF( RequestChangeTime_instance.Error = TRUE 
	 ) THEN 
</div>
<div class="FM_body1l">
	&#160;&#160;&#160;&#160;&#160;&#160;&#160;// Add error processing as 
	 required. 
</div>
<div class="FM_body1l">
	&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Stage := 10; 
</div>
<div class="FM_body1l">
	&#160;&#160;&#160;&#160;END_IF; 
</div>
<div class="FM_body1l">
	2: // Wait for completion of change. 
</div>
<div class="FM_body1l">
	&#160;&#160;&#160;&#160;F_TRIG_instance( _GEM_BusyEquipChangeTime, 
	 Trigger ); 
</div>
<div class="FM_body1l">
	&#160;&#160;&#160;&#160;IF( Trigger = TRUE) THEN 
</div>
<div class="FM_body1l">
	&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Stage := 10; 
</div>
<div class="FM_body1l">
	&#160;&#160;&#160;&#160;END_IF; 
</div>
<div class="FM_body1l">
	10: // End 
</div>
<div class="FM_body1l">
	&#160;&#160;&#160;&#160;Stage := 0; 
</div>
<div class="FM_body1l">
	END_CASE; 
</div>
</body>
</html>
