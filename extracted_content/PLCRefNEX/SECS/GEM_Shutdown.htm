
<!doctype HTML public "-//W3C//DTD HTML 4.0 Frameset//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
 <meta name="generator" content="Adobe RoboHelp 11">
<title>GEM_Shutdown</title>
<link rel="StyleSheet" href="SECS.css" type="text/css">
<style title="hcp" type="text/css">
<!--
table.hcp1 { padding-left:4.00pt;
padding-top:3.00pt;
padding-right:4.00pt;
padding-bottom:1.00pt; }
th.hcp2 { border-top:solid 1px #000000;
border-right:solid 1px #000000;
border-bottom:solid 1px #000000;
vertical-align:top;
padding-left:6.00pt;
padding-top:3.00pt;
padding-right:6.00pt;
padding-bottom:3.00pt; }
th.hcp3 { border-top:solid 1px #000000;
border-bottom:solid 1px #000000;
vertical-align:top;
padding-left:6.00pt;
padding-top:3.00pt;
padding-right:6.00pt;
padding-bottom:3.00pt; }
td.hcp4 { border-right:solid 1px #000000;
border-bottom:solid 1px #000000;
vertical-align:top;
padding-left:6.00pt;
padding-top:3.00pt;
padding-right:6.00pt;
padding-bottom:3.00pt; }
td.hcp5 { border-bottom:solid 1px #000000;
vertical-align:top;
padding-left:6.00pt;
padding-top:3.00pt;
padding-right:6.00pt;
padding-bottom:3.00pt; }
table.hcp6 { padding-top:5.00pt;
padding-right:4.00pt;
padding-bottom:1.00pt; }
td.hcp7 { vertical-align:top;
padding-left:6.00pt;
padding-top:3.00pt;
padding-right:6.00pt;
padding-bottom:3.00pt; }
span.hcp8 { font-style:italic; }
span.hcp9 { word-spacing:normal;
font:6.0pt 'Times New Roman'; }
table.hcp10 { padding-top:6.00pt;
padding-right:4.00pt;
padding-bottom:1.00pt;
margin-left:31.18pt; }
td.hcp11 { border-left:solid 7px #000000;
border-bottom:solid 1px #000000;
vertical-align:top;
padding-left:6.00pt;
padding-top:3.00pt;
padding-right:6.00pt;
padding-bottom:3.00pt; }
table.hcp12 { padding-left:4.00pt;
padding-top:3.00pt;
padding-right:4.00pt;
padding-bottom:1.00pt;
margin-left:42.52pt; }
-->
</style>
</head>

<body>
<script type="text/javascript" src="../../ehlpdhtm.js" language="JavaScript1.2"></script>

<p class="Title">GEM_Shutdown</p>
<p class="FM_body1">The GEM_Shutdown instruction shuts down the GEM Service.</p>

<table cellspacing="0" width="661" class="hcp1">
	<tr style="height: 25.00pt;" bgcolor="#B3B3B3">
		<th width="102" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Instruction</p></th>
		<th width="94" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Name</p></th>
		<th width="43" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">FB/</p>
		<p class="FM_tabletitlec9pt">FUN</p></th>
		<th width="236" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Graphic 
		 expression</p></th>
		<th width="186" bgcolor="#B3B3B3" class="hcp3"><p class="FM_tabletitlec9pt">ST expression</p></th>
	</tr>
	<tr style="height: 98.02pt;">
		<td width="102" class="hcp4"><p 
			 class="FM_tablebody1c9pt">GEM_Shutdown</p></td>
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">Shutdown GEM Service</p></td>
		<td width="43" class="hcp4"><p 
			 class="FM_tablebody1c9pt">FB</p></td>
		<td style="border-right: solid 1px #000000; border-bottom: solid 1px #000000;" 
			 width="236"><div style="text-align: center;">
			<img alt="Appendix_A00008.jpg" id="image3" src="Appendix_A00008.jpg" width="185" height="123" border="0"> 
		</div>
		<p class="FM_fig">&#160;</p></td>
		<td width="186" class="hcp5"><p class="FM_tablebody1c9pt">GEM_Shutdown_instance(</p>
		<p class="FM_tablebody1c9pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Execute,</p>
		<p class="FM_tablebody1c9pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Done,</p>
		<p class="FM_tablebody1c9pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Busy,</p>
		<p class="FM_tablebody1c9pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Error,</p>
		<p class="FM_tablebody1c9pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ErrorID);</p></td>
	</tr>
</table>

<p class="FM_CRhead3">&#160;</p>

<table cellspacing="0" width="661" class="hcp6">
	<tr style="height: 20.00pt;" bgcolor="#B3B3B3">
		<td width="661" bgcolor="#B3B3B3" class="hcp7"><p class="FM_CRhead3">Variables</p></td>
	</tr>
</table>

<p class="FM_body1">Only common variables are used.</p>

<table cellspacing="0" width="661" class="hcp6">
	<tr style="height: 20.00pt;" bgcolor="#B3B3B3">
		<td width="661" bgcolor="#B3B3B3" class="hcp7"><p class="FM_CRhead3">Function</p></td>
	</tr>
</table>

<p class="FM_body1">The GEM_Shutdown instruction shuts down the GEM Service.</p>
<p class="FM_body1">&#160;</p>
<p class="FM_body1">During execution of the instruction, the <span class="hcp8">_GEM_ServiceStatus</span>&#160;system-defined 
 variable is ShuttingDown. If execution ends normally, it changes to Shutdown.</p>
<p class="FM_body1">&#160;</p>

<table cellspacing="0" width="661" class="hcp6">
	<tr style="height: 20.00pt;" bgcolor="#B3B3B3">
		<td width="661" bgcolor="#B3B3B3" class="hcp7"><p class="FM_CRhead3">Related System-defined 
		 Variables</p></td>
	</tr>
</table>

<p class="FM_tabletitlec9pt">&#160;</p>

<table cellspacing="0" width="661" class="hcp1">
	<tr style="height: 13.00pt;" bgcolor="#B3B3B3">
		<th width="151" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Name</p></th>
		<th width="151" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Meaning</p></th>
		<th width="76" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Data 
		 type</p></th>
		<th width="283" bgcolor="#B3B3B3" class="hcp3"><p class="FM_tabletitlec9pt">Description</p></th>
	</tr>
	<tr style="height: 49.00pt;">
		<td width="151" class="hcp4"><p 
			 class="FM_tablebody1c9pt">_GEM_ServiceStatus</p></td>
		<td width="151" class="hcp4"><p 
			 class="FM_tablebody1c9pt">GEM Service Status</p></td>
		<td width="76" class="hcp4"><p 
			 class="FM_tablebody1c9pt">_sGEM_­SER­VICE_STATUS</p></td>
		<td width="283" class="hcp5"><p class="FM_tablebody1c9pt">Gives 
		 the GEM Service status.</p>
		<p class="FM_tablebody1c9pt">Refer to <a href="GEM_SystemVariables.htm#A206_GEM_Service_Status">GEM 
		 Service status</a> for details.</p></td>
	</tr>
</table>

<p class="FM_body1">&#160;</p>

<table cellspacing="0" width="661" class="hcp6">
	<tr style="height: 20.00pt;" bgcolor="#B3B3B3">
		<td width="661" bgcolor="#B3B3B3" class="hcp7"><p class="FM_CRhead3">Related Error Codes</p></td>
	</tr>
</table>

<p class="FM_tabletitlec9pt">&#160;</p>

<table cellspacing="0" width="661" class="hcp1">
	<tr style="height: 13.00pt;" bgcolor="#B3B3B3">
		<th width="94" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Error 
		 code</p></th>
		<th width="227" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Name</p></th>
		<th width="340" bgcolor="#B3B3B3" class="hcp3"><p class="FM_tabletitlec9pt">Description</p></th>
	</tr>
	<tr style="height: 25.00pt;">
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">16#041D</p></td>
		<td width="227" class="hcp4"><p 
			 class="FM_tablebody1c9pt">Exceeded Simultaneous Instruction 
		 Exe­cuted Resources</p></td>
		<td width="340" class="hcp5"><p class="FM_tablebody1c9pt">The 
		 number of simultaneously executed GEM instructions exceeded the 
		 limit.</p></td>
	</tr>
	<tr style="height: 25.00pt;">
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">16#3810</p></td>
		<td width="227" class="hcp4"><p 
			 class="FM_tablebody1c9pt">GEM Service Status in Initializing</p></td>
		<td width="340" class="hcp5"><p class="FM_tablebody1c9pt">The 
		 instruction was executed when the GEM Service status was Initializing.</p></td>
	</tr>
	<tr style="height: 25.00pt;">
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">16#3816</p></td>
		<td width="227" class="hcp4"><p 
			 class="FM_tablebody1c9pt">GEM Service Status in ShuttingDown</p></td>
		<td width="340" class="hcp5"><p class="FM_tablebody1c9pt">The 
		 instruction was executed when the GEM Service status was ShuttingDown.</p></td>
	</tr>
	<tr style="height: 25.00pt;">
		<td width="94" class="hcp4"><p 
			 class="FM_tablebody1c9pt">16#3817</p></td>
		<td width="227" class="hcp4"><p 
			 class="FM_tablebody1c9pt">GEM Service Status in Shutdown</p></td>
		<td width="340" class="hcp5"><p class="FM_tablebody1c9pt">The 
		 instruction was executed when the GEM Service status was Shutdown.</p></td>
	</tr>
</table>

<p class="FM_body1">&#160;</p>
<p class="FM_body1">&#160;</p>

<table cellspacing="0" width="661" class="hcp6">
	<tr style="height: 20.00pt;" bgcolor="#B3B3B3">
		<td width="661" bgcolor="#B3B3B3" class="hcp7"><p class="FM_CRhead3">Precautions for Correct 
		 Use</p></td>
	</tr>
</table>

<p class="FM_bul1">•<span class="hcp9">&#160;&#160;&#160;&#160;</span>Check 
 <span class="hcp8">_GEM_ServiceStatus</span>&#160;before 
 you execute this instruction. If you execute this instruction when <span class="hcp8">_GEM_ServiceStatus</span>&#160;is ShuttingDown 
 or Shutdown, an error will occur and <span class="hcp8">Error</span>&#160;will 
 change to TRUE.</p>
<p class="FM_bul1">•<span class="hcp9">&#160;&#160;&#160;&#160;</span>Execute 
 this instruction before you turn OFF the power supply to the controller. 
 If you do not execute this instruction before you turn OFF the power supply 
 to the controller, the data in internal non-volatile memory or on the 
 SD Memory Card may be corrupted.</p>

<table cellspacing="0" width="661" class="hcp6">
	<tr style="height: 20.00pt;" bgcolor="#B3B3B3">
		<td width="661" bgcolor="#B3B3B3" class="hcp7"><p class="FM_CRhead3">Sample Programming</p></td>
	</tr>
</table>

<p class="FM_body1">This sample shuts down the GEM Services.</p>
<p class="FM_body1">If the GEM Service status is ShuttingDown or Shutdown 
 and the <span class="hcp8">Shutdown_Start</span>&#160;internal 
 variable changes from FALSE to TRUE, the GEM Services are shut down.</p>

<table cellspacing="0" width="620" class="hcp10">
	<tr style="height: 21.00pt;">
		<td width="620" class="hcp11"><p 
			 class="FM_CRhead3">LD</p></td>
	</tr>
</table>

<p class="FM_tabletitlec9pt">&#160;</p>

<table cellspacing="0" width="605" class="hcp12">
	<tr style="height: 25.00pt;" bgcolor="#B3B3B3">
		<th width="76" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Internal 
		 Variables</p></th>
		<th width="132" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Variable</p></th>
		<th width="113" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Data 
		 type</p></th>
		<th width="57" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Initial 
		 value</p></th>
		<th width="227" bgcolor="#B3B3B3" class="hcp3"><p class="FM_tabletitlec9pt">Comment</p></th>
	</tr>
	<tr style="height: 25.00pt;">
		<td rowspan="2" width="76" class="hcp7"><p class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="132" class="hcp4"><p 
			 class="FM_tablebody1c9pt">Shutdown_Start</p></td>
		<td width="113" class="hcp4"><p 
			 class="FM_tablebody1c9pt">BOOL</p></td>
		<td width="57" class="hcp4"><p 
			 class="FM_tablebody1c9pt">FALSE</p></td>
		<td width="227" class="hcp5"><p class="FM_tablebody1c9pt">Flag 
		 to start shutting down the GEM Ser­vices</p></td>
	</tr>
	<tr style="height: 13.00pt;">
		<td width="132" class="hcp4"><p 
			 class="FM_tablebody1c9pt">Shutdown_instance</p></td>
		<td width="113" class="hcp4"><p 
			 class="FM_tablebody1c9pt">GEM_Shutdown</p></td>
		<td width="57" class="hcp4"><p 
			 class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="227" class="hcp5"><p class="FM_tablebody1c9pt">Instance 
		 of GEM_Shutdown instruction</p></td>
	</tr>
</table>

<p class="FM_body1">&#160;</p>

<table cellspacing="0" width="605" class="hcp12">
	<tr style="height: 25.00pt;" bgcolor="#B3B3B3">
		<th width="76" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">External 
		 Variables</p></th>
		<th width="174" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Variable</p></th>
		<th width="355" bgcolor="#B3B3B3" class="hcp3"><p class="FM_tabletitlec9pt">Comment</p></th>
	</tr>
	<tr style="height: 13.00pt;">
		<td width="76" class="hcp7"><p 
			 class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="174" class="hcp4"><p 
			 class="FM_tablebody1c9pt">_GEM_ServiceStatus</p></td>
		<td width="355" class="hcp5"><p class="FM_tablebody1c9pt">GEM 
		 Service status</p></td>
	</tr>
</table>

<p class="FM_body1">&#160;</p>
<div style="text-align: left;">
	<img alt="GEM_Shutdown_030.jpg" id="image4" src="GEM_Shutdown_030.jpg" width="661" height="129" border="0"> 
</div>
<p class="FM_fig">&#160;</p>
<p class="FM_1pt">&#160;</p>

<table cellspacing="0" width="620" class="hcp10">
	<tr style="height: 21.00pt;">
		<td width="620" class="hcp11"><p 
			 class="FM_CRhead3">ST</p></td>
	</tr>
</table>

<p class="FM_tabletitlec9pt">&#160;</p>

<table cellspacing="0" width="605" class="hcp12">
	<tr style="height: 25.00pt;" bgcolor="#B3B3B3">
		<th width="76" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Internal 
		 Variables</p></th>
		<th width="132" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Variable</p></th>
		<th width="113" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Data 
		 type</p></th>
		<th width="57" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Initial 
		 value</p></th>
		<th width="227" bgcolor="#B3B3B3" class="hcp3"><p class="FM_tabletitlec9pt">Comment</p></th>
	</tr>
	<tr style="height: 25.00pt;">
		<td rowspan="5" width="76" class="hcp7"><p class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="132" class="hcp4"><p 
			 class="FM_tablebody1c9pt">Shutdown_Start</p></td>
		<td width="113" class="hcp4"><p 
			 class="FM_tablebody1c9pt">BOOL</p></td>
		<td width="57" class="hcp4"><p 
			 class="FM_tablebody1c9pt">FALSE</p></td>
		<td width="227" class="hcp5"><p class="FM_tablebody1c9pt">Flag 
		 to start shutting down the GEM Ser­vices</p></td>
	</tr>
	<tr style="height: 13.00pt;">
		<td width="132" class="hcp4"><p 
			 class="FM_tablebody1c9pt">R_TRIG_instance</p></td>
		<td width="113" class="hcp4"><p 
			 class="FM_tablebody1c9pt">R_TRIG</p></td>
		<td width="57" class="hcp4"><p 
			 class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="227" class="hcp5"><p class="FM_tablebody1c9pt">Instance 
		 of R_TRIG instruction</p></td>
	</tr>
	<tr style="height: 25.00pt;">
		<td width="132" class="hcp4"><p 
			 class="FM_tablebody1c9pt">Trigger</p></td>
		<td width="113" class="hcp4"><p 
			 class="FM_tablebody1c9pt">BOOL</p></td>
		<td width="57" class="hcp4"><p 
			 class="FM_tablebody1c9pt">FALSE</p></td>
		<td width="227" class="hcp5"><p class="FM_tablebody1c9pt">Flag 
		 for FALSE to TRUE change in <span class="hcp8">Shut­down_Start</span></p></td>
	</tr>
	<tr style="height: 13.00pt;">
		<td width="132" class="hcp4"><p 
			 class="FM_tablebody1c9pt">Shutdown_instance</p></td>
		<td width="113" class="hcp4"><p 
			 class="FM_tablebody1c9pt">GEM_Shutdown</p></td>
		<td width="57" class="hcp4"><p 
			 class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="227" class="hcp5"><p class="FM_tablebody1c9pt">Instance 
		 of GEM_Shutdown instruction</p></td>
	</tr>
	<tr style="height: 13.00pt;">
		<td width="132" class="hcp4"><p 
			 class="FM_tablebody1c9pt">Stage</p></td>
		<td width="113" class="hcp4"><p 
			 class="FM_tablebody1c9pt">INT</p></td>
		<td width="57" class="hcp4"><p 
			 class="FM_tablebody1c9pt">0</p></td>
		<td width="227" class="hcp5"><p class="FM_tablebody1c9pt">Program 
		 execution status</p></td>
	</tr>
</table>

<p class="FM_body1ST">&#160;</p>

<table cellspacing="0" width="605" class="hcp12">
	<tr style="height: 25.00pt;" bgcolor="#B3B3B3">
		<th width="76" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">External 
		 Variables</p></th>
		<th width="174" bgcolor="#B3B3B3" class="hcp2"><p class="FM_tabletitlec9pt">Variable</p></th>
		<th width="355" bgcolor="#B3B3B3" class="hcp3"><p class="FM_tabletitlec9pt">Comment</p></th>
	</tr>
	<tr style="height: 13.00pt;">
		<td width="76" class="hcp7"><p 
			 class="FM_tablebody1c9pt">&#160;</p></td>
		<td width="174" class="hcp4"><p 
			 class="FM_tablebody1c9pt">_GEM_ServiceStatus</p></td>
		<td width="355" class="hcp5"><p class="FM_tablebody1c9pt">GEM 
		 Service status</p></td>
	</tr>
</table>

<p class="FM_body1ST">&#160;</p>
<div class="FM_body1l">CASE Stage Of </div>
<div class="FM_body1l">0: </div>
<div class="FM_body1l">&#160;&#160;&#160;&#160;R_TRIG_instance( Shutdown_Start, 
 Trigger ); </div>
<div class="FM_body1l">&#160;&#160;&#160;&#160;IF( ( Trigger = TRUE ) </div>
<div class="FM_body1l">&#160;&#160;&#160;&#160;AND ( (_GEM_ServiceStatus.ShuttingDown 
 = FALSE) AND (_GEM_ServiceStatus.Shutdown = FALSE) ) ) THEN </div>
<div class="FM_body1l">&#160;&#160;&#160;&#160;&#160;&#160;&#160;// Initialization</div>
<div class="FM_body1l">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Shutdown_instance( 
 Execute:=FALSE ); </div>
<div class="FM_body1l">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Stage 
 := 1; </div>
<div class="FM_body1l">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;END_IF; 
 </div>
<div class="FM_body1l">1: // Start send.</div>
<div class="FM_body1l">&#160;&#160;&#160;&#160;Shutdown_instance( Execute:=TRUE 
 ); </div>
<div class="FM_body1l">&#160;&#160;&#160;&#160;IF( Shutdown_instance.Done 
 = TRUE ) THEN </div>
<div class="FM_body1l">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Stage 
 := 10; </div>
<div class="FM_body1l">&#160;&#160;&#160;ELSIF( Shutdown_instance.Error 
 = TRUE ) THEN</div>
<div class="FM_body1l">&#160;&#160;&#160;&#160;&#160;&#160;&#160;// Add 
 error processing as required.</div>
<div class="FM_body1l">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Stage 
 := 10; </div>
<div class="FM_body1l">&#160;&#160;&#160;&#160;END_IF; </div>
<div class="FM_body1l">10: // End</div>
<div class="FM_body1l">&#160;&#160;&#160;&#160;Stage := 0; </div>
<div class="FM_body1l">END_CASE;</div>
</body>
</html>
